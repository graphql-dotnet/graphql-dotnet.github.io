<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.9.1"/><meta data-react-helmet="true" name="description" content="GraphQL for .NET"/><meta data-react-helmet="true" name="keywords" content="graphql,api,web api,.net,.net core"/><style data-href="/styles.71340509c59b3fced1c9.css" data-identity="gatsby-global-css">.landing{margin:1.8rem auto}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{word-wrap:break-word;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:georgia,serif;font-kerning:normal;font-weight:400}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem}ol{padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{word-wrap:normal;background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}html{color:#2c3e50}body,html{-webkit-font-smoothing:antialiased;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:16px;overflow:auto;text-rendering:optimizeLegibility}body{margin:0}#___gatsby{overflow:auto}#gatsby-focus-wrapper{height:100%}ul{padding:0}li,ul{margin:0}a{color:#3eaf7c;text-decoration:underline}.header{border-bottom:1px solid #eaecef;height:60px}.header ul{padding:20px}.header li{display:inline-block;list-style:none;padding:0 12px}.header li a{color:#2c3e50;text-decoration:none}.footer{height:60px}.footer,.header{flex:none}.page-body{display:flex;flex-direction:column;height:calc(100% - 60px)}.content{height:100%;overflow-x:hidden;overflow-y:hidden;padding:2em;width:100%}.content ul{margin:20px 0}.content ul li{margin:0 0 0 30px}.content blockquote{border-left:7px solid #eaecef;margin:0 0 1.45rem;padding:30px}.content pre{margin-bottom:1.45rem}.content-body,.content-toolbar{margin:0 auto;max-width:740px}.content-toolbar{padding:1rem 0}.nav{border:0;flex-grow:1;min-width:18rem;order:1;overflow-x:hidden;overflow-y:inherit;padding-top:2rem}.nav li{list-style:none}.nav li span{display:block;font-weight:600;padding:.25rem 1rem .25rem 1.5rem}.nav ul{margin-bottom:15px}.nav ul a{border-left:.25rem solid transparent;color:#2c3e50;display:inline-block;line-height:1.4;padding:.25rem 1rem .25rem 1.25rem;text-decoration:none}.nav ul a:hover{color:#3eaf7c}.nav ul a.active{border-left:.25rem solid #3eaf7c;color:#3eaf7c;text-decoration:none}@media (min-width:768px){#___gatsby,body,html{height:100%;overflow-y:hidden}.page-body{flex-direction:row}.content{overflow-y:auto}.ads,.nav{order:-1}.nav{border-right:1px solid #eaecef;overflow-y:auto}}</style><title data-react-helmet="true">GraphQL .NET</title><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="header"><ul><li><a href="/">GraphQL.NET</a></li><li><a href="/docs/getting-started/introduction/">Docs</a></li><li><a href="https://github.com/graphql-dotnet/graphql-dotnet" rel="noopener noreferrer" target="_blank">GitHub</a></li></ul></nav><div class="page-body"><div class="content"><article class="content-body"><h1 id="migrating-from-v7x-to-v8x" style="position:relative;"><a href="#migrating-from-v7x-to-v8x" aria-label="migrating from v7x to v8x permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Migrating from v7.x to v8.x</h1>
<p>:warning: For the best upgrade experience, please upgrade to 7.9 and use the included analyzers
to apply automatic code fixes to obsolete code patterns before upgrading to 8.0. :warning:</p>
<p>See <a href="https://github.com/graphql-dotnet/graphql-dotnet/issues?q=milestone%3A8.0+is%3Aissue+is%3Aclosed">issues</a> and
<a href="https://github.com/graphql-dotnet/graphql-dotnet/pulls?q=is%3Apr+milestone%3A8.0+is%3Aclosed">pull requests</a> done in v8.</p>
<h2 id="overview" style="position:relative;"><a href="#overview" aria-label="overview permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>GraphQL.NET v8 is a major release that includes many new features, including:</p>
<ul>
<li>Argument parsing now occurs during validation</li>
<li>Fields and arguments can have custom parsers applied, which will catch more coercion errors during validation rather than execution</li>
<li>Fields can configure validation code for argument values which will run during the validation stage</li>
<li>Validation rules can execute after arguments have been parsed</li>
<li>Complexity analyzer rewritten; can examine arguments to facilitate analysis</li>
<li>Federation support is simplified and Federation 2 is supported</li>
<li>Federation is supported for schema-first, code-first and type-first</li>
<li>Input object coercion via <code class="language-text">ToObject</code> is dynamically compiled</li>
<li><code class="language-text">ComplexScalarGraphType</code> added, allowing flexible input/output types</li>
<li><code class="language-text">IMetadataWriter</code> and similar interfaces added to allow better intellisense</li>
<li>List converter enhancements and AOT support</li>
<li>OneOf Input Object support (based on draft spec)</li>
<li>Infer nullability by default for <code class="language-text">Field</code> methods</li>
<li>Add Persisted Document support (based on draft spec)</li>
<li>Better error handling of GraphQL.NET pipeline; add timeout support</li>
<li>Optimize scalar lists (e.g. <code class="language-text">ListGraphType&lt;IntGraphType></code>)</li>
<li>Allow GraphQL interfaces to implement other GraphQL interfaces (based on spec)</li>
<li>Field-specific middleware support (v8.7.0+)</li>
</ul>
<p>Some of these features require changes to the infrastructure, which can cause breaking changes during upgrades.
Most notably, if your server uses any of the following features, you are likely to encounter migration issues:</p>
<ul>
<li>Custom validation rules, schema node visitors, or IResolveFieldContext implementations</li>
<li>The complexity analyzer</li>
<li>Apollo Federation subgraph support</li>
<li>Custom implementations of GraphQL.NET infrastructure (e.g. custom <code class="language-text">IGraphType</code> implementations not based on an included class)</li>
<li>Manual registration of GraphQL.NET infrastructure types (vs. using <code class="language-text">AddGraphQL</code> builder methods)</li>
<li>Input object graph types having models utilizing private constructors or non-default init-only properties</li>
<li>Generic graph types</li>
<li>Methods previously marked as obsolete</li>
<li>GraphQL types which improperly implement interfaces</li>
<li>Calls to <code class="language-text">ExecutionHelper.GetArguments</code></li>
</ul>
<p>Below we have documented each new feature and breaking change, outlining the steps you need to take to upgrade your
application to v8.0. When possible, we have provided code examples to help you understand the changes required, and
options to revert behavior to v7.x if necessary.</p>
<p>Please keep in mind that methods and classes marked as obsolete in v8.x may be removed in v9.0. Each obsolete member
will include a message indicating the expected removal version.</p>
<p>For best results through the migration, we recommend following these steps:</p>
<ol>
<li>Upgrade to GraphQL.NET v7.9</li>
<li>Use the included analyzers to apply automatic code fixes to obsolete code patterns</li>
<li>Implement a test that verifies the SDL of your schema matches the expected schema, as this will catch any changes
the generated schema between versions; a sample of this code is provided at the bottom of this document</li>
<li>Set <code class="language-text">GlobalSwitches.UseLegacyTypeNaming</code> to <code class="language-text">false</code> and verify your type names have not changed (or override them),
or set <code class="language-text">GlobalSwitches.UseLegacyTypeNaming</code> to <code class="language-text">true</code> to maintain v7.x behavior during the migration</li>
<li>Set <code class="language-text">GlobalSwitches.InferFieldNullabilityFromNRTAnnotations</code> to <code class="language-text">true</code> and verify your inferred field types
have not changed, or set <code class="language-text">GlobalSwitches.InferFieldNullabilityFromNRTAnnotations</code> to <code class="language-text">false</code> to maintain v7.x behavior</li>
<li>Upgrade to GraphQL.NET v8.0</li>
</ol>
<h2 id="new-features" style="position:relative;"><a href="#new-features" aria-label="new features permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New Features</h2>
<h3 id="1-code-classlanguage-textimetadatareadercode-code-classlanguage-textimetadatawritercode-and-code-classlanguage-textifieldmetadatawritercode-interfaces-added" style="position:relative;"><a href="#1-code-classlanguage-textimetadatareadercode-code-classlanguage-textimetadatawritercode-and-code-classlanguage-textifieldmetadatawritercode-interfaces-added" aria-label="1 code classlanguage textimetadatareadercode code classlanguage textimetadatawritercode and code classlanguage textifieldmetadatawritercode interfaces added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. <code class="language-text">IMetadataReader</code>, <code class="language-text">IMetadataWriter</code> and <code class="language-text">IFieldMetadataWriter</code> interfaces added</h3>
<p>This makes it convenient to add extension methods to graph types or fields that can be used to read or write metadata
such as authentication information. Methods for <code class="language-text">IMetadataWriter</code> types will appear on both field builders and graph/field
types, while methods for <code class="language-text">IMetadataReader</code> types will only appear on graph and field types. You can also access the
<code class="language-text">IMetadataReader</code> reader from the <code class="language-text">IMetadataWriter.MetadataReader</code> property. Here is an example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">TMetadataBuilder</span> <span class="token generic-method"><span class="token function">RequireAdmin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TMetadataBuilder<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">TMetadataBuilder</span> builder<span class="token punctuation">)</span>
    <span class="token keyword">where</span> <span class="token class-name">TMetadataBuilder</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IMetadataWriter</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>builder<span class="token punctuation">.</span>MetadataReader<span class="token punctuation">.</span>GetRoles<span class="token punctuation">?.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">"Guests"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InvalidOperationException</span><span class="token punctuation">(</span><span class="token string">"Cannot require admin and guest access at the same time."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">AuthorizeWithRoles</span><span class="token punctuation">(</span><span class="token string">"Administrators"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Both interfaces extend <code class="language-text">IProvideMetadata</code> with read/write access to the metadata contained within the graph or field type.
Be sure not to write metadata during the execution of a query, as the same graph/field type instance may be used for
multiple queries and you would run into concurrency issues.</p>
<p>In addition, the <code class="language-text">IFieldMetadataWriter</code> interface has been added to allow scoping extension methods to fields only.
For example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// adds the GraphQL Federation '@requires' directive to the field</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">TMetadataWriter</span> <span class="token generic-method"><span class="token function">Requires</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TMetadataWriter<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">TMetadataWriter</span> fieldType<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> fields<span class="token punctuation">)</span>
    <span class="token keyword">where</span> <span class="token class-name">TMetadataWriter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFieldMetadataWriter</span></span>
    <span class="token operator">=></span> fieldType<span class="token punctuation">.</span><span class="token function">ApplyDirective</span><span class="token punctuation">(</span>PROVIDES_DIRECTIVE<span class="token punctuation">,</span> d <span class="token operator">=></span> d<span class="token punctuation">.</span><span class="token function">AddArgument</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">(</span>FIELDS_ARGUMENT<span class="token punctuation">)</span> <span class="token punctuation">{</span> Value <span class="token operator">=</span> fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="2-built-in-scalars-may-be-overridden-via-di-registrations" style="position:relative;"><a href="#2-built-in-scalars-may-be-overridden-via-di-registrations" aria-label="2 built in scalars may be overridden via di registrations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Built-in scalars may be overridden via DI registrations</h3>
<p>For GraphQL.NET built-in scalars (such as <code class="language-text">IntGraphType</code> or <code class="language-text">GuidGraphType</code>), a dervied class may be registered
within the DI engine to facilitate replacement of the graph type throughout the schema versus calling <code class="language-text">RegisterType</code>.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BooleanGraphType<span class="token punctuation">,</span> MyBooleanGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>See <a href="https://graphql-dotnet.github.io/docs/getting-started/custom-scalars/#3-register-the-custom-scalar-within-your-schema">https://graphql-dotnet.github.io/docs/getting-started/custom-scalars/#3-register-the-custom-scalar-within-your-schema</a>
for more details.</p>
<h3 id="3-added-code-classlanguage-textcomplexscalargraphtypecode" style="position:relative;"><a href="#3-added-code-classlanguage-textcomplexscalargraphtypecode" aria-label="3 added code classlanguage textcomplexscalargraphtypecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Added <code class="language-text">ComplexScalarGraphType</code></h3>
<p>This new scalar can be used to send or receive arbitrary objects or values to or from the server. It is functionally
equivalent to the <code class="language-text">AnyGraphType</code> used for GraphQL Federation, but defaults to the name of <code class="language-text">Complex</code> rather than <code class="language-text">_Any</code>.</p>
<h3 id="4-code-classlanguage-textparsercode-delegates-added-to-input-field-and-argument-definitions" style="position:relative;"><a href="#4-code-classlanguage-textparsercode-delegates-added-to-input-field-and-argument-definitions" aria-label="4 code classlanguage textparsercode delegates added to input field and argument definitions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. <code class="language-text">Parser</code> delegates added to input field and argument definitions</h3>
<p>This allows for custom parsing of input values. The <code class="language-text">Parser</code> delegate is used to convert the input value
to the expected type, and can be set via the <code class="language-text">ParseValue</code> method on the <code class="language-text">FieldBuilder</code> or <code class="language-text">QueryArgument</code>.</p>
<p>The auto-registering graph types will automatically configure the <code class="language-text">Parser</code> delegate appropriately, and the
<code class="language-text">Field(x => x.Property)</code> and <code class="language-text">Field("FieldName", x => x.Property)</code> syntax will as well.</p>
<p>The most common use case for this is when using the ID graph type (passed via a string) for a numeric or GUID identifier.
For example, consider the following code:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// for input object graph type</span>
<span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"Id"</span><span class="token punctuation">,</span> x <span class="token operator">=></span> x<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token named-parameter punctuation">type</span><span class="token punctuation">:</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">NonNullGraphType<span class="token punctuation">&lt;</span>IdGraphType<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyInputObject</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This will now cause an error when the client sends a string value for the Id field that cannot be coerced to
an <code class="language-text">int</code> during the validation stage, rather than during the execution stage. Supplying an invalid value will
produce a response similar to the following:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"errors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Invalid value for argument 'id' of field 'testMe'. The input string 'abc' was not in a correct format."</span><span class="token punctuation">,</span>
      <span class="token property">"locations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"line"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">"column"</span><span class="token operator">:</span> <span class="token number">14</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"extensions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"INVALID_VALUE"</span><span class="token punctuation">,</span>
        <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"INVALID_VALUE"</span><span class="token punctuation">,</span>
          <span class="token string">"FORMAT"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"number"</span><span class="token operator">:</span> <span class="token string">"5.6"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This now is a validation error and not passed to the unhandled exception handler. Previously, this would have been
considered a server exception and processed by the unhandled exception handler, returning an error similar to the
following:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"errors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Error trying to resolve field 'testMe'."</span><span class="token punctuation">,</span>
      <span class="token property">"locations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"line"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">"column"</span><span class="token operator">:</span> <span class="token number">3</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"testMe"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"extensions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"FORMAT"</span><span class="token punctuation">,</span>
        <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"FORMAT"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You can also define a custom parser when appropriate to convert an input value to the expected type.
This is typically unnecessary when using the <code class="language-text">Field(x => x.Property)</code> syntax, but when matching via
property name, it may be desired to define a custom parser. For example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// for input object graph type</span>
<span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"website"</span><span class="token punctuation">)</span> <span class="token comment">// match by property name, perhaps for a constructor argument</span>
    <span class="token punctuation">.</span><span class="token function">ParseValue</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyInputObject</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Uri<span class="token punctuation">?</span></span> Website <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Without adding a parser the coercion will occur within the resolver during <code class="language-text">GetArgument&lt;Uri>("abc")</code>
as occured in previous versions of GraphQL.NET. This will result in a server exception being thrown
and processed by the unhandled exception handler if the value cannot be coerced to a <code class="language-text">Uri</code>. Note that
the parser function need not check for null values.</p>
<p>For type-first schemas in v8.1 and later, you may use the <code class="language-text">[Parser]</code> attribute to define a custom parser
as shown in the below example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// sample for argument parsing</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OutputClass1</span>
<span class="token punctuation">{</span>
    <span class="token comment">// use local private static method</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parser</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>ParseHelloArgument<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// use public static method from another class -- looks for ParserClass.Parse</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parser</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ParserClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// use public static method from another class with a specific name</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello3</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parser</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HelperClass</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>HelperClass<span class="token punctuation">.</span>ParseHelloArgument<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// example custom parser</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">ParseHelloArgument</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token operator">+</span> <span class="token string">"test1"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// sample for input field parsing</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputClass1</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parser</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>ParseHelloArgument<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Field1 <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">ParseHelloArgument</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token operator">+</span> <span class="token string">"test1"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that this will replace the default parser configured by the auto-registering graph type.</p>
<h3 id="5-code-classlanguage-textvalidatorcode-delegates-added-to-input-field-and-argument-definitions" style="position:relative;"><a href="#5-code-classlanguage-textvalidatorcode-delegates-added-to-input-field-and-argument-definitions" aria-label="5 code classlanguage textvalidatorcode delegates added to input field and argument definitions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. <code class="language-text">Validator</code> delegates added to input field and argument definitions</h3>
<p>This allows for custom validation of input values. It can be used to easily validate input values
such as email addresses, phone numbers, or to validate a value is within a specific range. The
<code class="language-text">Validator</code> delegate is used to validate the input value, and can be set via the <code class="language-text">Validate</code> method
on the <code class="language-text">FieldBuilder</code> or <code class="language-text">QueryArgument</code>. Here are some examples:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// for an input object graph type</span>
<span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>FirstName<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">"Length must be less than 10 characters."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Age<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token operator">&lt;</span> <span class="token number">18</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">"Age must be 18 or older."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Password<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token function">VerifyPasswordComplexity</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The <code class="language-text">Validator</code> delegate is called during the validation stage, prior to execution of the request.
Null values are not passed to the validation function. Supplying an invalid value will produce
a response similar to the following:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"errors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Invalid value for argument 'firstName' of field 'testMe'. Length must be less than 10 characters."</span><span class="token punctuation">,</span>
      <span class="token property">"locations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"line"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">"column"</span><span class="token operator">:</span> <span class="token number">14</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"extensions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"INVALID_VALUE"</span><span class="token punctuation">,</span>
        <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"INVALID_VALUE"</span><span class="token punctuation">,</span>
          <span class="token string">"ARGUMENT"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"number"</span><span class="token operator">:</span> <span class="token string">"5.6"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For type-first schemas, you may define your own attributes to perform validation, either on input
fields or on output field arguments. For example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// for AutoRegisteringObjectGraphType&lt;MyClass></span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">TestMe</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MyMaxLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">MyMaxLength</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">GraphQLAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span> _maxLength<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">MyMaxLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> maxLength<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _maxLength <span class="token operator">=</span> maxLength<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Modify</span><span class="token punctuation">(</span><span class="token class-name">ArgumentInformation</span> argumentInformation<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>argumentInformation<span class="token punctuation">.</span>TypeInformation<span class="token punctuation">.</span>Type <span class="token operator">!=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InvalidOperationException</span><span class="token punctuation">(</span><span class="token string">"MyMaxLength can only be used on string arguments."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Modify</span><span class="token punctuation">(</span><span class="token class-name">QueryArgument</span> queryArgument<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        queryArgument<span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length <span class="token operator">></span> _maxLength<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Value is too long. Max length is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">_maxLength</span><span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In version 8.1 and newer, you can use the <code class="language-text">[Validator]</code> attribute to define a custom validator
as shown in the below example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// sample for argument validation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OutputClass2</span>
<span class="token punctuation">{</span>
    <span class="token comment">// use local private static method</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validator</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>ValidateHelloArgument<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// use public static method from another class -- looks for ValidatorClass.Validate</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validator</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ValidatorClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// use public static method from another class with a specific name</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello3</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validator</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HelperClass</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>HelperClass<span class="token punctuation">.</span>ValidateHelloArgument<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// example custom validator</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ValidateHelloArgument</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token operator">!=</span> <span class="token string">"hello"</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">"Value must be 'hello'."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// sample for input field validation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputClass2</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validator</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>ValidateHelloArgument<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Field1 <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ValidateHelloArgument</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token operator">!=</span> <span class="token string">"hello"</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">"Value must be 'hello'."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Similar to the <code class="language-text">Parser</code> delegate, the <code class="language-text">Validator</code> delegate is called during the validation stage,
and will not unnecessarily trigger the unhandled exception handler due to client input errors.</p>
<p>At this time GraphQL.NET does not directly support the <code class="language-text">MaxLength</code> and similar attributes from
<code class="language-text">System.ComponentModel.DataAnnotations</code>, but this may be added in a future version. You can
implement your own attributes as shown above, or call the <code class="language-text">Validate</code> method to set a validation
function.</p>
<h3 id="6-code-classlanguage-textargumentvalidatorcode-delegate-added-to-input-objectinterface-field-definitions-since-81" style="position:relative;"><a href="#6-code-classlanguage-textargumentvalidatorcode-delegate-added-to-input-objectinterface-field-definitions-since-81" aria-label="6 code classlanguage textargumentvalidatorcode delegate added to input objectinterface field definitions since 81 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. <code class="language-text">ArgumentValidator</code> delegate added to input object/interface field definitions (since 8.1)</h3>
<p>This allows for custom validation of the coerced argument values. It can be used when you must
enforce certain relationships between arguments, such as ensuring that at least one of multiple
arguments are provided, or that a specific argument is provided when another argument is set to
a specific value. It can be set by configuring the <code class="language-text">ValidateArguments</code> delegate on the <code class="language-text">FieldType</code>
class or calling the <code class="language-text">ValidateArguments</code> method on the field builder. Here is an example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"example"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Argument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"str1"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Argument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"str2"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ValidateArguments</span><span class="token punctuation">(</span>ctx <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> str1 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetArgument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"str1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> str2 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetArgument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"str2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> str2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationError</span><span class="token punctuation">(</span><span class="token string">"Must provide str1 or str2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Please throw a <code class="language-text">ValidationError</code> exception or call <code class="language-text">ctx.ReportError</code> to return a validation error to
the client. Throwing <code class="language-text">ExecutionError</code> will prevent further validation rules from being executed,
and throwing other exceptions will be caught by the unhandled exception handler. This is different
than the <code class="language-text">Parser</code> and <code class="language-text">Validator</code> delegates, or scalar coercion methods, which will not trigger the
unhandled exception handler.</p>
<p>In version 8.1 and newer, you may use the <code class="language-text">[ValidateArguments]</code> attribute to define a custom argument
validator as shown in the below example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// sample for argument validation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OutputClass3</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello1</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> str1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> str2<span class="token punctuation">)</span> <span class="token operator">=></span> str1 <span class="token operator">+</span> str2<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateArguments</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>ValidateHelloArguments<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello2</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> str1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> str2<span class="token punctuation">)</span> <span class="token operator">=></span> str1 <span class="token operator">+</span> str2<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">ValueTask</span> <span class="token function">ValidateHelloArguments</span><span class="token punctuation">(</span><span class="token class-name">FieldArgumentsValidationContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> str1 <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetArgument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"str1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> str2 <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetArgument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"str2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> str2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            context<span class="token punctuation">.</span><span class="token function">ReportError</span><span class="token punctuation">(</span><span class="token string">"Must provide str1 or str2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="7-code-classlanguage-textpatterncode-custom-directive-added-for-validating-input-values-against-a-regular-expression-pattern" style="position:relative;"><a href="#7-code-classlanguage-textpatterncode-custom-directive-added-for-validating-input-values-against-a-regular-expression-pattern" aria-label="7 code classlanguage textpatterncode custom directive added for validating input values against a regular expression pattern permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. <code class="language-text">@pattern</code> custom directive added for validating input values against a regular expression pattern</h3>
<p>This directive allows for specifying a regular expression pattern to validate the input value.
It can also be used as sample code for designing new custom directives, and is now the preferred
design over the older <code class="language-text">InputFieldsAndArgumentsOfCorrectLength</code> validation rule.
This directive is not enabled by default, and must be added to the schema as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyQuery<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ConfigureSchema</span><span class="token punctuation">(</span>s <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token comment">// add the directive to the schema</span>
        s<span class="token punctuation">.</span>Directives<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PatternMatchingDirective</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// add the visitor to the schema, which will apply validation rules to all field</span>
        <span class="token comment">// arguments and input fields that have the @pattern directive applied</span>
        s<span class="token punctuation">.</span><span class="token function">RegisterVisitor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PatternMatchingVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You can then apply the directive to any input field or argument as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>FirstName<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ApplyDirective</span><span class="token punctuation">(</span><span class="token string">"pattern"</span><span class="token punctuation">,</span> <span class="token string">"regex"</span><span class="token punctuation">,</span> <span class="token string">"[A-Z]+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// uppercase only</span></code></pre></div>
<h3 id="8-directiveattribute-added-to-support-applying-directives-to-type-first-graph-types-and-fields" style="position:relative;"><a href="#8-directiveattribute-added-to-support-applying-directives-to-type-first-graph-types-and-fields" aria-label="8 directiveattribute added to support applying directives to type first graph types and fields permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. DirectiveAttribute added to support applying directives to type-first graph types and fields</h3>
<p>For example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Directive</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"pattern"</span><span class="token punctuation">,</span> <span class="token string">"regex"</span><span class="token punctuation">,</span> <span class="token string">"[A-Z]+"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// uppercase only</span>
        <span class="token class-name"><span class="token keyword">string</span></span> arg<span class="token punctuation">)</span>
        <span class="token operator">=></span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="9-validation-rules-can-read-or-validate-field-arguments-and-directive-arguments" style="position:relative;"><a href="#9-validation-rules-can-read-or-validate-field-arguments-and-directive-arguments" aria-label="9 validation rules can read or validate field arguments and directive arguments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. Validation rules can read or validate field arguments and directive arguments</h3>
<p>Validation rules can now execute validation code either before or after field arguments
have been read. This is useful for edge cases, such as when a complexity analyzer needs
to read the value of a field argument to determine the complexity of the field.</p>
<p>The <code class="language-text">ValidateAsync</code> method on <code class="language-text">IValidationRule</code> has been changed to <code class="language-text">GetPreNodeVisitorAsync</code>,
and a new method <code class="language-text">GetPostNodeVisitorAsync</code> has been added. Also, the <code class="language-text">IVariableVisitorProvider</code>
interface has been combined with <code class="language-text">IValidationRule</code> and now has a new method <code class="language-text">GetVariableVisitorAsync</code>.
So the new <code class="language-text">IValidationRule</code> interface looks like this:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IValidationRule</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>INodeVisitor<span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetPreNodeVisitorAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>IVariableVisitor<span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetVariableVisitorAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>INodeVisitor<span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetPostNodeVisitorAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This allows for a single validation rule to validate AST structure, validate variable values,
and/or validate coerced field and directive arguments.</p>
<p>To simplify the creation of validation rules, the abstract <code class="language-text">ValidationRuleBase</code> class has
been added, which implements the <code class="language-text">IValidationRule</code> interface and provides default implementations
for all three methods.</p>
<p>Documentation has been added to the <a href="https://graphql-dotnet.github.io/docs/getting-started/query-validation/">Query Validation</a>
section of the documentation to explain how to create custom validation rules using the
revised <code class="language-text">IValidationRule</code> interface and related classes.</p>
<h3 id="10-list-coercion-can-be-customized" style="position:relative;"><a href="#10-list-coercion-can-be-customized" aria-label="10 list coercion can be customized permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>10. List coercion can be customized</h3>
<p>Previously only specific list types were natively supported, such as <code class="language-text">List&lt;T></code> and <code class="language-text">IEnumerable&lt;T></code>,
and list types that implemented <code class="language-text">IList</code>. Now, any list-like type such as <code class="language-text">HashSet&lt;T></code> or <code class="language-text">Queue&lt;T></code>
which has either a public parameterless constructor along with an <code class="language-text">Add(T value)</code> method, or a constructor
that takes an <code class="language-text">IEnumerable&lt;T></code> is supported. This allows for more flexibility in the types of lists
that can be used as CLR input types.</p>
<p>You can also register a custom list coercion provider to handle custom list types. For instance, if you
wish to use a case-insensitive comparer for <code class="language-text">HashSet&lt;string></code> types, you can register a custom list coercion
provider as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// register for HashSet&lt;string></span>
ValueConverter<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterListConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
    values <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> StringComparer<span class="token punctuation">.</span>OrdinalIgnoreCase<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// also register for ISet&lt;string></span>
ValueConverter<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterListConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ISet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
    values <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> StringComparer<span class="token punctuation">.</span>OrdinalIgnoreCase<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The <code class="language-text">RegisterListProvider</code> method is also useful in AOT scenarios to provide ideal performance since dynamic
code generation is not possible, and to prevent trimming of necessary list types.</p>
<p>You can also register a custom list coercion provider for an open generic type. For instance, if you wish to
provide a custom list coercion provider for <code class="language-text">IImmutableList&lt;T></code>, you can register it as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImmutableListConverterFactory</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ListConverterFactoryBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">></span></span> <span class="token generic-method"><span class="token function">Create</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> list <span class="token operator">=></span> ImmutableList<span class="token punctuation">.</span><span class="token function">CreateRange</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Cast</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ValueConverter<span class="token punctuation">.</span><span class="token function">RegisterListConverterFactory</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IImmutableList<span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ImmutableListConverterFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Finally, if you simply need to map an interface list type to a concrete list type, you can do so as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">ValueConverter<span class="token punctuation">.</span><span class="token function">RegisterListConverterFactory</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IList<span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">List<span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// default mapping is T[]</span></code></pre></div>
<h3 id="11-code-classlanguage-textigraphtypeisprivatecode-and-code-classlanguage-textifieldtypeisprivatecode-properties-added" style="position:relative;"><a href="#11-code-classlanguage-textigraphtypeisprivatecode-and-code-classlanguage-textifieldtypeisprivatecode-properties-added" aria-label="11 code classlanguage textigraphtypeisprivatecode and code classlanguage textifieldtypeisprivatecode properties added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11. <code class="language-text">IGraphType.IsPrivate</code> and <code class="language-text">IFieldType.IsPrivate</code> properties added</h3>
<p>Allows to set a graph type or field as private within a schema visitor, effectively removing it from the schema.
Introspection queries will not be able to query the type/field, and queries will not be able to reference the type/field.
Exporting the schema as a SDL (or printing it) will not include the private types or fields.</p>
<p>Private types are fully 'resolved' and validated; you can obtain references to these types or fields in a schema validation
visitor before they are removed from the schema. After initialization is complete, these types and fields will not be present
within SchemaTypes or TypeFields. The only exception for validation is that private types are not required have any fields
or, for interfaces and unions, possible types.</p>
<p>This makes it possible to create a private type used within the schema but not exposed to the client. For instance,
it is possible to dynamically create input object types to deserialize GraphQL Federation entity representations, which
are normally sent via the <code class="language-text">_Any</code> type.</p>
<h3 id="12-code-classlanguage-textiobjectgraphtypeskiptypecheckcode-property-added" style="position:relative;"><a href="#12-code-classlanguage-textiobjectgraphtypeskiptypecheckcode-property-added" aria-label="12 code classlanguage textiobjectgraphtypeskiptypecheckcode property added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12. <code class="language-text">IObjectGraphType.SkipTypeCheck</code> property added</h3>
<p>Allows to skip the type check for a specific object graph type during resolver execution. This is useful
for schema-first schemas where the CLR type is not defined while the resolver is built, while allowing
<code class="language-text">IsTypeOf</code> to be set automatically for other use cases. Schema-first schemas will automatically set this
property to <code class="language-text">true</code> for all object graph types to retain the existing behavior.</p>
<h3 id="13-code-classlanguage-textischemanodevisitorpostvisitschemacode-method-added" style="position:relative;"><a href="#13-code-classlanguage-textischemanodevisitorpostvisitschemacode-method-added" aria-label="13 code classlanguage textischemanodevisitorpostvisitschemacode method added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>13. <code class="language-text">ISchemaNodeVisitor.PostVisitSchema</code> method added</h3>
<p>Allows to revisit the schema after all other methods (types/fields/etc) have been visited.</p>
<h3 id="14-graphql-federation-v2-graph-types-added" style="position:relative;"><a href="#14-graphql-federation-v2-graph-types-added" aria-label="14 graphql federation v2 graph types added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>14. GraphQL Federation v2 graph types added</h3>
<p>These graph types have been added to the <code class="language-text">GraphQL.Federation.Types</code> namespace:</p>
<ul>
<li><code class="language-text">AnyScalarType</code> (moved from <code class="language-text">GraphQL.Utilities.Federation</code>)</li>
<li><code class="language-text">EntityGraphType</code></li>
<li><code class="language-text">FieldSetGraphType</code></li>
<li><code class="language-text">LinkImportGraphType</code></li>
<li><code class="language-text">LinkPurpose</code> enumeration</li>
<li><code class="language-text">LinkPurposeGraphType</code></li>
<li><code class="language-text">ServiceGraphType</code></li>
</ul>
<h3 id="15-extension-methods-and-attributes-added-to-simplify-applying-graphql-federation-directives-in-code-first-and-type-first-schemas" style="position:relative;"><a href="#15-extension-methods-and-attributes-added-to-simplify-applying-graphql-federation-directives-in-code-first-and-type-first-schemas" aria-label="15 extension methods and attributes added to simplify applying graphql federation directives in code first and type first schemas permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>15. Extension methods and attributes added to simplify applying GraphQL Federation directives in code-first and type-first schemas</h3>
<p>These extension methods and attributes simplify the process of applying GraphQL Federation directives:</p>
<table>
<thead>
<tr>
<th>Directive</th>
<th>Extension Method</th>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">@external</code></td>
<td><code class="language-text">External()</code></td>
<td><code class="language-text">[External]</code></td>
<td>Indicates that this subgraph usually can't resolve a particular object field, but it still needs to define that field for other purposes.</td>
</tr>
<tr>
<td><code class="language-text">@requires</code></td>
<td><code class="language-text">Requires(fields)</code></td>
<td><code class="language-text">[Requires(fields)]</code></td>
<td>Indicates that the resolver for a particular entity field depends on the values of other entity fields that are resolved by other subgraphs. This tells the router that it needs to fetch the values of those externally defined fields first, even if the original client query didn't request them.</td>
</tr>
<tr>
<td><code class="language-text">@provides</code></td>
<td><code class="language-text">Provides(fields)</code></td>
<td><code class="language-text">[Provides(fields)]</code></td>
<td>Specifies a set of entity fields that a subgraph can resolve, but only at a particular schema path (at other paths, the subgraph can't resolve those fields).</td>
</tr>
<tr>
<td><code class="language-text">@key</code></td>
<td><code class="language-text">Key(fields)</code></td>
<td><code class="language-text">[Key(fields)]</code></td>
<td>Designates an object type as an entity and specifies its key fields. Key fields are a set of fields that a subgraph can use to uniquely identify any instance of the entity.</td>
</tr>
<tr>
<td><code class="language-text">@override</code></td>
<td><code class="language-text">Override(from)</code></td>
<td><code class="language-text">[Override(from)]</code></td>
<td>Indicates that an object field is now resolved by this subgraph instead of another subgraph where it's also defined. This enables you to migrate a field from one subgraph to another.</td>
</tr>
<tr>
<td><code class="language-text">@shareable</code></td>
<td><code class="language-text">Shareable()</code></td>
<td><code class="language-text">[Shareable]</code></td>
<td>Indicates that an object type's field is allowed to be resolved by multiple subgraphs (by default in Federation 2, object fields can be resolved by only one subgraph).</td>
</tr>
<tr>
<td><code class="language-text">@inaccessible</code></td>
<td><code class="language-text">Inaccessible()</code></td>
<td><code class="language-text">[Inaccessible]</code></td>
<td>Indicates that a definition in the subgraph schema should be omitted from the router's API schema, even if that definition is also present in other subgraphs. This means that the field is not exposed to clients at all.</td>
</tr>
</tbody>
</table>
<h3 id="16-oneof-input-object-support-added" style="position:relative;"><a href="#16-oneof-input-object-support-added" aria-label="16 oneof input object support added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>16. OneOf Input Object support added</h3>
<p>OneOf Input Objects are a special variant of Input Objects where the type system
asserts that exactly one of the fields must be set and non-null, all others
being omitted. This is useful for representing situations where an input may be
one of many different options.</p>
<p>See: <a href="https://github.com/graphql/graphql-spec/pull/825">https://github.com/graphql/graphql-spec/pull/825</a></p>
<p>To use this feature:</p>
<ul>
<li><strong>Code-First</strong>: Set the <code class="language-text">IsOneOf</code> property on your <code class="language-text">InputObjectGraphType</code> to <code class="language-text">true</code>.</li>
<li><strong>Schema-First</strong>: Use the <code class="language-text">@oneOf</code> directive on the input type in your schema definition.</li>
<li><strong>Type-First</strong>: Use the <code class="language-text">[OneOf]</code> directive on the CLR class.</li>
</ul>
<p>Note: the feature is still a draft and has not made it into the official GraphQL spec yet.
It is expected to be added once it has been implemented in multiple libraries and proven to be useful.
It is not expected to change from the current draft.</p>
<h3 id="17-federation-entity-resolver-configuration-methods-and-attributes-added-for-code-first-and-type-first-schemas" style="position:relative;"><a href="#17-federation-entity-resolver-configuration-methods-and-attributes-added-for-code-first-and-type-first-schemas" aria-label="17 federation entity resolver configuration methods and attributes added for code first and type first schemas permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>17. Federation entity resolver configuration methods and attributes added for code-first and type-first schemas</h3>
<p>Extension methods have been added for defining entity resolvers in code-first and type-first schemas
for GraphQL Federation.</p>
<p>Code-first sample 1: (uses entity type for representation)</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WidgetType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectGraphType<span class="token punctuation">&lt;</span>Widget<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">WidgetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// configure federation key fields</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// configure federation resolver</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResolveReference</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> widget<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token comment">// pull the id from the representation</span>
            <span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> widget<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>

            <span class="token comment">// resolve the entity reference</span>
            <span class="token class-name"><span class="token keyword">var</span></span> widgetData <span class="token operator">=</span> context<span class="token punctuation">.</span>RequestServices<span class="token operator">!</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WidgetRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">await</span> widgetData<span class="token punctuation">.</span><span class="token function">GetWidgetByIdAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> context<span class="token punctuation">.</span>CancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// configure fields</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token named-parameter punctuation">type</span><span class="token punctuation">:</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">NonNullGraphType<span class="token punctuation">&lt;</span>IdGraphType<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Widget</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Code-first sample 2: (uses custom type for representation)</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WidgetType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectGraphType<span class="token punctuation">&lt;</span>Widget<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">WidgetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// configure federation key fields</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// configure federation resolver</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ResolveReference</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WidgetRepresentation<span class="token punctuation">,</span> Widget<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> widget<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token comment">// pull the id from the representation</span>
            <span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> widget<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>

            <span class="token comment">// resolve the entity reference</span>
            <span class="token class-name"><span class="token keyword">var</span></span> widgetData <span class="token operator">=</span> context<span class="token punctuation">.</span>RequestServices<span class="token operator">!</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WidgetRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">await</span> widgetData<span class="token punctuation">.</span><span class="token function">GetWidgetByIdAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> context<span class="token punctuation">.</span>CancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// configure fields</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token named-parameter punctuation">type</span><span class="token punctuation">:</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">NonNullGraphType<span class="token punctuation">&lt;</span>IdGraphType<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Widget</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WidgetRepresentation</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Type-first sample 1: (static method; uses method arguments for representation)</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// configure federation key fields</span>
<span class="token punctuation">[</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Widget</span>
<span class="token punctuation">{</span>
    <span class="token comment">// configure fields</span>
    <span class="token punctuation">[</span>Id<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// configure federation resolver</span>
    <span class="token punctuation">[</span>FederationResolver<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Widget<span class="token punctuation">></span></span> <span class="token function">ResolveReference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromServices</span></span><span class="token punctuation">]</span> <span class="token class-name">WidgetRepository</span> widgetData<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Id</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// resolve the entity reference</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> widgetData<span class="token punctuation">.</span><span class="token function">GetWidgetByIdAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Type-first sample 2: (instance method; uses instance for representation)</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// configure federation key fields</span>
<span class="token punctuation">[</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Widget</span>
<span class="token punctuation">{</span>
    <span class="token comment">// configure fields</span>
    <span class="token punctuation">[</span>Id<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// configure federation resolver</span>
    <span class="token punctuation">[</span>FederationResolver<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Widget<span class="token punctuation">></span></span> <span class="token function">ResolveReference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromServices</span></span><span class="token punctuation">]</span> <span class="token class-name">WidgetRepository</span> widgetData<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// pull the id from the representation</span>
        <span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> Id<span class="token punctuation">;</span>

        <span class="token comment">// resolve the entity reference</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> widgetData<span class="token punctuation">.</span><span class="token function">GetWidgetByIdAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that you may apply the <code class="language-text">[Key]</code> attribute multiple times to define multiple sets of key fields, pursuant to the
GraphQL Federation specification. You may define multiple resolvers when using static methods in a type-first schema.
Otherwise your method will need to decide which set of key fields to use for resolution, as demonstrated in the
code-first sample below:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WidgetType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectGraphType<span class="token punctuation">&lt;</span>Widget<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">WidgetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// configure federation key fields</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token string">"sku"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// configure federation resolver</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResolveReference</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> widget<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token comment">// pull the key values from the representation</span>
            <span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> widget<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> sku <span class="token operator">=</span> widget<span class="token punctuation">.</span>Sku<span class="token punctuation">;</span>

            <span class="token comment">// resolve the entity reference</span>
            <span class="token class-name"><span class="token keyword">var</span></span> widgetData <span class="token operator">=</span> context<span class="token punctuation">.</span>RequestServices<span class="token operator">!</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WidgetRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token keyword">await</span> widgetData<span class="token punctuation">.</span><span class="token function">GetWidgetByIdAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> context<span class="token punctuation">.</span>CancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> <span class="token keyword">await</span> widgetData<span class="token punctuation">.</span><span class="token function">GetWidgetBySkuAsync</span><span class="token punctuation">(</span>sku<span class="token punctuation">,</span> context<span class="token punctuation">.</span>CancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// configure fields</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token named-parameter punctuation">type</span><span class="token punctuation">:</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">NonNullGraphType<span class="token punctuation">&lt;</span>IdGraphType<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Sku<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Widget</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Sku <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="18-applied-directives-may-contain-metadata" style="position:relative;"><a href="#18-applied-directives-may-contain-metadata" aria-label="18 applied directives may contain metadata permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>18. Applied directives may contain metadata</h3>
<p><code class="language-text">AppliedDirective</code> now implements <code class="language-text">IProvideMetadata</code>, <code class="language-text">IMetadataReader</code> and <code class="language-text">IMetadataWriter</code>
to allow for reading and writing metadata to applied directives.</p>
<h3 id="19-support-added-for-the-apollo-code-classlanguage-textlinkcode-directive" style="position:relative;"><a href="#19-support-added-for-the-apollo-code-classlanguage-textlinkcode-directive" aria-label="19 support added for the apollo code classlanguage textlinkcode directive permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>19. Support added for the Apollo <code class="language-text">@link</code> directive</h3>
<p>This directive indicates that some types and/or directives are to be imported from another schema.
Types and directives can be explicitly imported, either with their original name or with an alias.
Any types or directives that are not explicitly imported will be assumed to be named with a specified
namespace, which is derived from the URL of the linked schema if not set explicitly.
Visit <a href="https://specs.apollo.dev/link/v1.0/">https://specs.apollo.dev/link/v1.0/</a> for more information.</p>
<p>To link another schema, use code like this in your schema constructor or <code class="language-text">ConfigureSchema</code> call:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">schema<span class="token punctuation">.</span><span class="token function">LinkSchema</span><span class="token punctuation">(</span><span class="token string">"https://specs.apollo.dev/federation/v2.3"</span><span class="token punctuation">,</span> o <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token comment">// override the default namespace of 'federation' with the alias 'fed'</span>
    o<span class="token punctuation">.</span>Namespace <span class="token operator">=</span> <span class="token string">"fed"</span><span class="token punctuation">;</span>

    <span class="token comment">// import the '@key' directive without an alias</span>
    o<span class="token punctuation">.</span>Imports<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"@key"</span><span class="token punctuation">,</span> <span class="token string">"@key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// import the '@shareable' directive with an alias of '@share'</span>
    o<span class="token punctuation">.</span>Imports<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"@shareable"</span><span class="token punctuation">,</span> <span class="token string">"@share"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// other directives such as '@requires' would be implicitly imported</span>
    <span class="token comment">// into the 'fed' namespace, so '@requires' becomes '@fed__requires'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In addition to applying a <code class="language-text">@link</code> directive to the schema, it will also import the <code class="language-text">@link</code> directive
and configure the necessary types and directives to support the <code class="language-text">@link</code> specification.
Your schema will then look like this:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">schema</span>
  <span class="token directive function">@link</span><span class="token punctuation">(</span><span class="token attr-name">url</span><span class="token punctuation">:</span> <span class="token string">"https://specs.apollo.dev/link/v1.0"</span><span class="token punctuation">,</span> <span class="token attr-name">import</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"@link"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token directive function">@link</span><span class="token punctuation">(</span><span class="token attr-name">url</span><span class="token punctuation">:</span> <span class="token string">"https://specs.apollo.dev/federation/v2.3"</span><span class="token punctuation">,</span> <span class="token attr-name">as</span><span class="token punctuation">:</span> <span class="token string">"fed"</span><span class="token punctuation">,</span> <span class="token attr-name">import</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"@key"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token attr-name">name</span><span class="token punctuation">:</span><span class="token string">"@shareable"</span><span class="token punctuation">,</span> <span class="token attr-name">as</span><span class="token punctuation">:</span><span class="token string">"@share"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment"># etc</span>
<span class="token punctuation">}</span>

<span class="token keyword">directive</span> <span class="token directive function">@link</span><span class="token punctuation">(</span><span class="token attr-name">url</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">as</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">,</span> <span class="token attr-name">import</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token property">link__Import</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token attr-name">purpose</span><span class="token punctuation">:</span> <span class="token property">link__Purpose</span><span class="token punctuation">)</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">SCHEMA</span>

<span class="token keyword">scalar</span> <span class="token property">link__Import</span>

<span class="token keyword">enum</span> <span class="token object">link__Purpose</span> <span class="token punctuation">{</span>
  <span class="token constant">EXECUTION</span>
  <span class="token constant">SECURITY</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You will still be required to add the imported schema definitions to your schema, such as <code class="language-text">@key</code>, <code class="language-text">@share</code>, and
<code class="language-text">@fed__requires</code> in the above example. You may also print the schema without imported definitions. To print the
schema without imported definitions, set the <code class="language-text">IncludeImportedDefinitions</code> option to <code class="language-text">false</code> when printing:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> sdl <span class="token operator">=</span> schema<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> IncludeImportedDefinitions <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The schema shown above would now print like this:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">schema</span>
  <span class="token directive function">@link</span><span class="token punctuation">(</span><span class="token attr-name">url</span><span class="token punctuation">:</span> <span class="token string">"https://specs.apollo.dev/link/v1.0"</span><span class="token punctuation">,</span> <span class="token attr-name">import</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"@link"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token directive function">@link</span><span class="token punctuation">(</span><span class="token attr-name">url</span><span class="token punctuation">:</span> <span class="token string">"https://specs.apollo.dev/federation/v2.3"</span><span class="token punctuation">,</span> <span class="token attr-name">as</span><span class="token punctuation">:</span> <span class="token string">"fed"</span><span class="token punctuation">,</span> <span class="token attr-name">import</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"@key"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token attr-name">name</span><span class="token punctuation">:</span><span class="token string">"@shareable"</span><span class="token punctuation">,</span> <span class="token attr-name">as</span><span class="token punctuation">:</span><span class="token string">"@share"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment"># etc</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that you may call <code class="language-text">LinkSchema</code> multiple times with the same URL to apply additional configuration
options to the same url, or with a separate URL to link multiple schemas.</p>
<h3 id="20-code-classlanguage-textfromschemaurlcode-added-to-code-classlanguage-textapplieddirectivecode" style="position:relative;"><a href="#20-code-classlanguage-textfromschemaurlcode-added-to-code-classlanguage-textapplieddirectivecode" aria-label="20 code classlanguage textfromschemaurlcode added to code classlanguage textapplieddirectivecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>20. <code class="language-text">FromSchemaUrl</code> added to <code class="language-text">AppliedDirective</code></h3>
<p>This property supports using a directive that was separately imported via <code class="language-text">@link</code>. After importing the schema as described
above, apply imported directives to your schema similar to the example below:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">graphType<span class="token punctuation">.</span><span class="token function">ApplyDirective</span><span class="token punctuation">(</span><span class="token string">"shareable"</span><span class="token punctuation">,</span> s <span class="token operator">=></span> s<span class="token punctuation">.</span>FromSchemaUrl <span class="token operator">=</span> <span class="token string">"https://specs.apollo.dev/federation/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// applies to any version</span>
<span class="token comment">// or</span>
graphType<span class="token punctuation">.</span><span class="token function">ApplyDirective</span><span class="token punctuation">(</span><span class="token string">"shareable"</span><span class="token punctuation">,</span> s <span class="token operator">=></span> s<span class="token punctuation">.</span>FromSchemaUrl <span class="token operator">=</span> <span class="token string">"https://specs.apollo.dev/federation/v2.3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// only version 2.3</span></code></pre></div>
<p>During schema initialization, the name of the applied directive will be resolved to the fully-qualified name.
In the above example, if <code class="language-text">@shareable</code> was imported, the directive will be applied as <code class="language-text">@shareable</code>, but if not, it will
be applied as <code class="language-text">@federation__shareable</code>. Aliases are also supported.</p>
<h3 id="21-code-classlanguage-textaddfederationcode-graphql-builder-call-added-to-initialize-any-schema-for-federation-support" style="position:relative;"><a href="#21-code-classlanguage-textaddfederationcode-graphql-builder-call-added-to-initialize-any-schema-for-federation-support" aria-label="21 code classlanguage textaddfederationcode graphql builder call added to initialize any schema for federation support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>21. <code class="language-text">AddFederation</code> GraphQL builder call added to initialize any schema for federation support</h3>
<p>This method will automatically add the necessary types and directives to support GraphQL Federation.
Simply call <code class="language-text">AddFederation</code> with the version number of the Federation specification that you wish to import
within your DI configuration. See example below:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MySchema<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFederation</span><span class="token punctuation">(</span><span class="token string">"2.3"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This will do the following:</p>
<ul>
<li>Configure the Query type to include the <code class="language-text">_service</code> field.</li>
<li>Configure the <code class="language-text">_Entity</code> type based on which of the schema's type definitions are marked with <code class="language-text">@key</code>.</li>
<li>Configure the Query type to include the <code class="language-text">_entities</code> field if there are any resolvable entities.</li>
<li>Link the schema to the Federation specification at <code class="language-text">https://specs.apollo.dev/federation/v2.3</code>.</li>
<li>Import the <code class="language-text">@key</code>, <code class="language-text">@requires</code>, <code class="language-text">@provides</code>, <code class="language-text">@external</code>, <code class="language-text">@extends</code>, <code class="language-text">@shareable</code>, <code class="language-text">@inaccessible</code>, <code class="language-text">@override</code> and <code class="language-text">@tag</code> directives.</li>
<li>Configure the remaining supported directives within the <code class="language-text">federation</code> namespace - <code class="language-text">@federation__interfaceObject</code> and <code class="language-text">@federation__composeDirective</code>
for version 2.3.</li>
</ul>
<p>Currently supported are versions 1.0 through 2.8. Note that for version 1.0, you will be required to mark
parts of your schema with <code class="language-text">@extends</code>. This is not required for version 2.0 and later.</p>
<p>You may add additional configuration to the <code class="language-text">AddFederation</code> call to import additional directives or types, remove imports,
change import aliases, or change the namespace used for directives that are not explicitly imported.</p>
<h3 id="22-infer-field-nullability-from-nrt-annotations-is-enabled-by-default" style="position:relative;"><a href="#22-infer-field-nullability-from-nrt-annotations-is-enabled-by-default" aria-label="22 infer field nullability from nrt annotations is enabled by default permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>22. Infer field nullability from NRT annotations is enabled by default</h3>
<p>When defining the field with expression, the graph type nullability will be inferred from
Null Reference Types (NRT) by default. To disable the feature, set the
<code class="language-text">GlobalSwitches.InferFieldNullabilityFromNRTAnnotations</code> to <code class="language-text">false</code>.</p>
<p>For example, given the following code</p>
<div class="gatsby-highlight" data-language="c#"><pre class="language-c#"><code class="language-c#">public class Person
{
    public string FullName { get; set; }
    public string? SpouseName { get; set; }
    public IList&lt;string&gt;? Children { get; set; }
}

public class PersonGraphType : ObjectGraphType&lt;Person&gt;
{
    public PersonGraphType()
    {
        Field(p =&gt; p.FullName);
        Field(p =&gt; p.SpouseName);
        Field(p =&gt; p.Children);
    }
}</code></pre></div>
<p>When <code class="language-text">InferFieldNullabilityFromNRTAnnotations</code> is <code class="language-text">true</code> (default), the result is:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">spouseName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">children</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>When <code class="language-text">InferFieldNullabilityFromNRTAnnotations</code> is <code class="language-text">false</code>:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">spouseName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">children</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="23-code-classlanguage-textvalidationcontextgetrecursivelyreferencedfragmentscode-updated-with-code-classlanguage-textskipcode-and-code-classlanguage-textincludecode-directive-support" style="position:relative;"><a href="#23-code-classlanguage-textvalidationcontextgetrecursivelyreferencedfragmentscode-updated-with-code-classlanguage-textskipcode-and-code-classlanguage-textincludecode-directive-support" aria-label="23 code classlanguage textvalidationcontextgetrecursivelyreferencedfragmentscode updated with code classlanguage textskipcode and code classlanguage textincludecode directive support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>23. <code class="language-text">ValidationContext.GetRecursivelyReferencedFragments</code> updated with <code class="language-text">@skip</code> and <code class="language-text">@include</code> directive support</h3>
<p>When developing a custom validation rule, such as an authorization rule, you may need to determine which fragments are
recursively referenced by an operation by calling <code class="language-text">GetRecursivelyReferencedFragments</code> with the <code class="language-text">onlyUsed</code> argument
set to <code class="language-text">true</code>. The method will then ignore fragments that are conditionally skipped by the <code class="language-text">@skip</code> or <code class="language-text">@include</code>
directives.</p>
<h3 id="24-persisted-document-support" style="position:relative;"><a href="#24-persisted-document-support" aria-label="24 persisted document support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>24. Persisted Document support</h3>
<p>GraphQL.NET now supports persisted documents based on the draft spec <a href="https://github.com/graphql/graphql-over-http/pull/264">listed here</a>.
Persisted documents are a way to store a query string on the server and reference it by a unique identifier, typically
a SHA-256 hash. When enabled, the default configuration disables use of the <code class="language-text">query</code> field in the request body and
requires the client to use the <code class="language-text">documentId</code> field instead. This acts as a whitelist of allowed queries and mutations
that the client may execute, while also reducing the size of the request body.</p>
<p>To configure persisted document support, you must implement the <code class="language-text">IPersistedDocumentLoader</code> interface to retrieve the
query string based on the document identifier, or set the <code class="language-text">GetQueryDelegate</code> property on the <code class="language-text">PersistedDocumentOptions</code>
class. See typical examples below:</p>
<h4 id="example-1---using-a-service-to-retrieve-persisted-documents" style="position:relative;"><a href="#example-1---using-a-service-to-retrieve-persisted-documents" aria-label="example 1   using a service to retrieve persisted documents permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1 - Using a service to retrieve persisted documents</h4>
<p>In the below example, regular requests (via the query property) are disabled, and only document identifiers
prefixed with <code class="language-text">sha256:</code> are allowed where the id is a 64-character lowercase hexadecimal string.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// configure the execution to utilize persisted documents</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token comment">// use default configuration, which disables the 'query' field and only allows SHA-256 hashes</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePeristedDocuments</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyLoader<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>GraphQL<span class="token punctuation">.</span>DI<span class="token punctuation">.</span>ServiceLifetime<span class="token punctuation">.</span>Scoped<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// configure a service to retrieve persisted documents based on their hash</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLoader</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPersistedDocumentLoader</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// pull in dependencies via DI as needed</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetQueryAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> documentIdPrefix<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> documentIdPayload<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> cancellationToken<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> _db<span class="token punctuation">.</span>QueryDocuments
            <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Hash <span class="token operator">==</span> documentIdPayload<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Query<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">FirstOrDefaultAsync</span><span class="token punctuation">(</span>cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Sample request:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"documentId"</span><span class="token operator">:</span> <span class="token string">"sha256:0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef"</span><span class="token punctuation">,</span>
  <span class="token property">"variables"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h4 id="example-2---configuring-persisted-documents-with-the-options-class" style="position:relative;"><a href="#example-2---configuring-persisted-documents-with-the-options-class" aria-label="example 2   configuring persisted documents with the options class permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2 - Configuring persisted documents with the options class</h4>
<p>In the below example, regular requests are allowed, and document identifiers are unprefixed GUIDs.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// configure the execution to utilize persisted documents</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">UsePeristedDocuments</span><span class="token punctuation">(</span>options <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token comment">// enable regular queries also</span>
        options<span class="token punctuation">.</span>AllowNonpersistedDocuments <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// use custom document identifiers and disable sha256 prefixed identifiers</span>
        options<span class="token punctuation">.</span>AllowedPrefixes<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        options<span class="token punctuation">.</span>AllowedPrefixes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// unprefixed document identifiers</span>
        <span class="token comment">// configure the service to retrieve persisted documents</span>
        options<span class="token punctuation">.</span>GetQueryDelegate <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>executionOptions<span class="token punctuation">,</span> documentIdPrefix<span class="token punctuation">,</span> documentIdPayload<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Guid<span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>documentIdPayload<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> id<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> executionOptions<span class="token punctuation">.</span>RequestServices<span class="token operator">!</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyDbContext<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>QueryDocuments
                <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Id <span class="token operator">==</span> id<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Query<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">FirstOrDefaultAsync</span><span class="token punctuation">(</span>executionOptions<span class="token punctuation">.</span>CancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Sample persisted document request:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"documentId"</span><span class="token operator">:</span> <span class="token string">"01234567-89ab-cdef-0123-456789abcdef"</span><span class="token punctuation">,</span>
  <span class="token property">"variables"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h4 id="caching-v830" style="position:relative;"><a href="#caching-v830" aria-label="caching v830 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caching (v8.3.0+)</h4>
<p>The persisted document handler does not provide caching by default. You may implement your own caching mechanism
within the <code class="language-text">GetQueryAsync</code> method to cache the query strings based on the document identifier. Alternatively, you
may add the <code class="language-text">.UseMemoryCache()</code> method from the <code class="language-text">GraphQL.MemoryCache</code> package to enable in-memory caching. Be sure
to call <code class="language-text">UseMemoryCache</code> before calling <code class="language-text">UsePeristedDocuments</code> to ensure that the cache is used.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">UseMemoryCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePeristedDocuments</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyLoader<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>GraphQL<span class="token punctuation">.</span>DI<span class="token punctuation">.</span>ServiceLifetime<span class="token punctuation">.</span>Scoped<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="24-execution-timeout-support" style="position:relative;"><a href="#24-execution-timeout-support" aria-label="24 execution timeout support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>24. Execution timeout support</h3>
<p><code class="language-text">ExecutionOptions.Timeout</code> has been added to allow a maximum time for the execution of a query. If the execution
exceeds the timeout, the execution will be cancelled and a timeout error will be returned to the client. The default
value is <code class="language-text">Timeout.InfiniteTimeSpan</code>, which means no timeout is set. The timeout error is not an 'unhandled' exception
and so is not passed through the <code class="language-text">UnhandledExceptionDelegate</code>.</p>
<p>Configuration:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// via the GraphQL builder</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or via the options</span>
options<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Example response:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"errors"</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"The operation has timed out."</span><span class="token punctuation">,</span>
            <span class="token property">"extensions"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"TIMEOUT"</span><span class="token punctuation">,</span> <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"TIMEOUT"</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that the timeout triggers immediate cancellation throughout the execution pipeline, including
resolvers and middleware. This means that any pending response data will be discarded as the client
would otherwise receive an incomplete response.</p>
<p>You may alternatively configure the timeout to throw a <code class="language-text">TimeoutException</code> to the caller. Set the
<code class="language-text">TimeoutAction</code> property as shown here:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// via the GraphQL builder</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> TimeoutAction<span class="token punctuation">.</span>ThrowTimeoutException<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or via the options</span>
options<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
options<span class="token punctuation">.</span>TimeoutAction <span class="token operator">=</span> TimeoutAction<span class="token punctuation">.</span>ThrowTimeoutException<span class="token punctuation">;</span></code></pre></div>
<p>If you wish to catch and handle timeout errors, use the delegate overload as demonstrated below:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> options <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token comment">// log the timeout error</span>
        <span class="token class-name"><span class="token keyword">var</span></span> logger <span class="token operator">=</span> options<span class="token punctuation">.</span>RequestServices<span class="token operator">!</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ILogger<span class="token punctuation">&lt;</span>MySchema<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"The operation has timed out."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// return a custom error</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ExecutionResult</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">TimeoutError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Please note that signaling the cancellation token passed to <code class="language-text">ExecutionOptions.CancellationToken</code> will always
rethrow the <code class="language-text">OperationCanceledException</code> to the caller, regardless of the <code class="language-text">TimeoutAction</code> setting.</p>
<h3 id="25-the-complexity-analyzer-has-been-rewritten-to-support-more-complex-scenarios" style="position:relative;"><a href="#25-the-complexity-analyzer-has-been-rewritten-to-support-more-complex-scenarios" aria-label="25 the complexity analyzer has been rewritten to support more complex scenarios permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>25. The complexity analyzer has been rewritten to support more complex scenarios</h3>
<p>Please review the documentation for the new complexity analyzer to understand how to use it and how to configure it.
See the <a href="../../guides/complexity-analyzer">Complexity Analzyer</a> document for more information.</p>
<h3 id="26-optimization-when-returning-lists-of-scalars" style="position:relative;"><a href="#26-optimization-when-returning-lists-of-scalars" aria-label="26 optimization when returning lists of scalars permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>26. Optimization when returning lists of scalars</h3>
<p>When returning a list of scalars, specifically of intrinsic types such as <code class="language-text">int</code>, <code class="language-text">string</code>, and <code class="language-text">bool</code>, the matching
scalar type (e.g. <code class="language-text">IntGraphType</code>, <code class="language-text">StringGraphType</code>, <code class="language-text">BooleanGraphType</code>) will be used to serialize the list as a whole
rather than each individual item. This can result in a significant performance improvement when returning large lists
of scalars. Be sure the returned list type (e.g. <code class="language-text">IEnumerable&lt;int></code>) matches the scalar type (e.g. <code class="language-text">IntGraphType</code>)
to take advantage of this optimization. Scalar types that require conversion, such as <code class="language-text">DateTimeGraphType</code> are not
currently optimized in this way.</p>
<h3 id="27-graphql-interfaces-may-implement-other-interfaces" style="position:relative;"><a href="#27-graphql-interfaces-may-implement-other-interfaces" aria-label="27 graphql interfaces may implement other interfaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>27. GraphQL interfaces may implement other interfaces</h3>
<p>Pursuant to the current GraphQL specification, interfaces may implement other interfaces. Add implemented interfaces
to your interface type definition as done for object graph types, as shown below:</p>
<p>Schema-first:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Character</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Code-first:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NodeGraphType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">InterfaceGraphType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">NodeGraphType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NonNullGraphType<span class="token punctuation">&lt;</span>IdGraphType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharacterGraphType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">InterfaceGraphType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">CharacterGraphType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NonNullGraphType<span class="token punctuation">&lt;</span>IdGraphType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NonNullGraphType<span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token generic-method"><span class="token function">Interface</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NodeGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Type-first:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Implements</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Node</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Character</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Node</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="28-code-classlanguage-textiresolvefieldcontextexecutioncontextcode-property-added" style="position:relative;"><a href="#28-code-classlanguage-textiresolvefieldcontextexecutioncontextcode-property-added" aria-label="28 code classlanguage textiresolvefieldcontextexecutioncontextcode property added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>28. <code class="language-text">IResolveFieldContext.ExecutionContext</code> property added</h3>
<p>The <code class="language-text">ExecutionContext</code> property has been added to the <code class="language-text">IResolveFieldContext</code> interface to allow access to the
underlying execution context. This is useful for accessing the parsed arguments and directives from the operation
via <code class="language-text">IExecutionContext.GetArguments</code> and <code class="language-text">GetDirectives</code>.</p>
<h3 id="29-code-classlanguage-textdefaultastvaluecode-attribute-added-v81-and-newer-to-set-default-values-for-complex-types-with-type-first-schemas" style="position:relative;"><a href="#29-code-classlanguage-textdefaultastvaluecode-attribute-added-v81-and-newer-to-set-default-values-for-complex-types-with-type-first-schemas" aria-label="29 code classlanguage textdefaultastvaluecode attribute added v81 and newer to set default values for complex types with type first schemas permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>29. <code class="language-text">[DefaultAstValue]</code> attribute added (v8.1 and newer) to set default values for complex types with type-first schemas</h3>
<p>When defining an input object or output field argument in a type-first schema, you may now use the <code class="language-text">[DefaultAstValue]</code>
attribute to specify a default value for the argument. This is useful when the argument is a complex type that cannot
be represented as a constant via <code class="language-text">[DefaultValue]</code> or in the method signature.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// typical way to set a default value of an input field, which is not possible for complex types</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInputObject1</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DefaultValue</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> required <span class="token return-type class-name"><span class="token keyword">string</span></span> Field1 <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// demonstrates setting a default value for an input field that has a complex type</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInputObject2</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DefaultAstValue</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"{ field1: \"value\" }"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">MyInputObject1</span> Json <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// output type</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyOutputObject</span>
<span class="token punctuation">{</span>
    <span class="token comment">// typical way to set a default value of an output field argument</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Field1</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> arg <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">)</span> <span class="token operator">=></span> arg<span class="token punctuation">;</span>

    <span class="token comment">// demonstrates setting a default value for an output field argument that has a complex type</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Field2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DefaultAstValue</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"{ field1: \"sample2\" }"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name">MyInputObject1</span> arg<span class="token punctuation">)</span> <span class="token operator">=></span> arg<span class="token punctuation">.</span>Field1<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="30-noclrmapping-extension-for-input-fields-with-custom-clr-mapping-from-version-840" style="position:relative;"><a href="#30-noclrmapping-extension-for-input-fields-with-custom-clr-mapping-from-version-840" aria-label="30 noclrmapping extension for input fields with custom clr mapping from version 840 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>30. NoClrMapping Extension for Input Fields with Custom CLR Mapping (from version 8.4.0)</h3>
<p>A new extension method, <code class="language-text">NoClrMapping</code>, has been introduced to give you fine-grained control
over how input object fields are mapped to CLR types. In many scenarios, your input types may
include fields that are computed or require custom processing before being set on your CLR model.
For example, you might have a CLR type with a single <code class="language-text">FullName</code> property but want your input
object to accept separate <code class="language-text">firstName</code> and <code class="language-text">lastName</code> fields. By marking these fields with
<code class="language-text">NoClrMapping()</code>, they are excluded from the automatic binding process. You can then override
the <code class="language-text">ParseDictionary</code> method to manually combine these values into the CLR's <code class="language-text">FullName</code> property,
while letting the base implementation handle any automatically mapped fields (such as <code class="language-text">Age</code>). The
following example illustrates this pattern:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FullName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonInputType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">InputObjectGraphType<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">PersonInputType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Name <span class="token operator">=</span> <span class="token string">"PersonInput"</span><span class="token punctuation">;</span>

        <span class="token comment">// Define fields for 'firstName' and 'lastName' that are not automatically mapped.</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NonNullGraphType<span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"firstName"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NoClrMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NonNullGraphType<span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"lastName"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NoClrMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Define the 'age' field which is automatically mapped to Person.Age.</span>
        <span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">ParseDictionary</span><span class="token punctuation">(</span><span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Use base.ParseDictionary to handle automatic mapping (e.g., Age).</span>
        <span class="token class-name"><span class="token keyword">var</span></span> person <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ParseDictionary</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Manually combine firstName and lastName into FullName.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span><span class="token string">"firstName"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> firstNameObj<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> firstNameObj <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">string</span></span> firstName <span class="token operator">&amp;&amp;</span>
            <span class="token keyword">value</span><span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span><span class="token string">"lastName"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> lastNameObj<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastNameObj <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">string</span></span> lastName<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            person<span class="token punctuation">.</span>FullName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">firstName</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">lastName</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> person<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In this example, the input object defines three fields: <code class="language-text">firstName</code>, <code class="language-text">lastName</code>, and <code class="language-text">age</code>.
The <code class="language-text">firstName</code> and <code class="language-text">lastName</code> fields are marked with <code class="language-text">NoClrMapping()</code> so that they are not
automatically bound to any CLR properties. Instead, the overridden <code class="language-text">ParseDictionary</code> method
combines these two fields into the <code class="language-text">FullName</code> property of the <code class="language-text">Person</code> CLR type. Meanwhile,
the <code class="language-text">Age</code> field is processed via the standard mapping mechanism by calling <code class="language-text">base.ParseDictionary</code>.
This approach allows you to seamlessly mix automatic and custom binding, providing greater
flexibility in how your input objects are processed and mapped.</p>
<h3 id="31-unique-cache-keys-for-multi-schema-environments-from-version-840" style="position:relative;"><a href="#31-unique-cache-keys-for-multi-schema-environments-from-version-840" aria-label="31 unique cache keys for multi schema environments from version 840 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>31. Unique Cache Keys for Multi-Schema Environments (from version 8.4.0)</h3>
<p>Document caching now supports unique cache keys for applications using multiple or dynamic
schemas. The cache key has been enhanced to include an extra property computed by the new
<code class="language-text">AdditionalCacheKeySelector</code> delegate. By default, this delegate distinguishes between
schema-first and code-first implementations by returning the schema instance for
schema-first and dynamic schemas (those that are direct implementations of
<code class="language-text">Schema</code>), and the schema type for code-first and type-first schemas (schemas that derive
from <code class="language-text">Schema</code>). This change ensures that cached documents are uniquely identified even
when multiple schemas are configured in the same application, while still supporting
caching for scoped code-first and type-first schemas.</p>
<p>To migrate, you may continue using the default behavior. However, if you need further
customization -- such as incorporating additional context to identify unique dynamic schemas
-- you can override the default selector as shown in the example below:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">UseMemoryCache</span><span class="token punctuation">(</span>options <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>AdditionalCacheKeySelector <span class="token operator">=</span> execOptions <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>execOptions<span class="token punctuation">.</span>UserContext <span class="token keyword">is</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">></span></span> context <span class="token operator">&amp;&amp;</span>
                context<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span><span class="token string">"CustomHeader"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> header<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> header<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>These changes help ensure that cached documents are correctly associated with the appropriate
schema when multiple schemas are in use.</p>
<h3 id="32-code-classlanguage-textigraphqlbuildervalidateservicescode-added-to-validate-services-during-schema-initialization-850" style="position:relative;"><a href="#32-code-classlanguage-textigraphqlbuildervalidateservicescode-added-to-validate-services-during-schema-initialization-850" aria-label="32 code classlanguage textigraphqlbuildervalidateservicescode added to validate services during schema initialization 850 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>32. <code class="language-text">IGraphQLBuilder.ValidateServices</code> added to validate services during schema initialization (8.5.0+)</h3>
<p>A new method, <code class="language-text">ValidateServices</code>, has been added to the <code class="language-text">IGraphQLBuilder</code> interface to allow
you to validate field resolver dependencies during schema initialization. Validation occurs during
schema initialization, verifying that any field arguments marked with <code class="language-text">[FromServices]</code> can be
resolved by the DI container, as well as any services referenced via <code class="language-text">.WithService&lt;T>()</code>.
This method is useful for detecting potential runtime errors caused by missing services or
incorrectly registered dependencies. The following example demonstrates how to use this method:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MySchema<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ValidateServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You may also manually mark a <code class="language-text">FieldType</code> as requiring a service by calling <code class="language-text">.DependsOn&lt;T>()</code>:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"myField"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DependsOn</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMyService<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Resolve</span><span class="token punctuation">(</span>context <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> service <span class="token operator">=</span> context<span class="token punctuation">.</span>RequestServices<span class="token operator">!</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMyService<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> service<span class="token punctuation">.</span><span class="token function">GetMyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="33-added-capability-to-reference-object-graph-types-from-their-implementing-interfaces-850" style="position:relative;"><a href="#33-added-capability-to-reference-object-graph-types-from-their-implementing-interfaces-850" aria-label="33 added capability to reference object graph types from their implementing interfaces 850 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>33. Added capability to reference object graph types from their implementing interfaces (8.5.0+)</h3>
<p>GraphQL.NET allows developers to configure object graph types to reference interfaces that they
implement via the <code class="language-text">Interface&lt;T>()</code> or <code class="language-text">AddResolvedInterface(IInterfaceGraphType type)</code>.
Alternatively, you may reference the object graph type from the interface by using
<code class="language-text">AddPossibleType(IObjectGraphType type)</code>. However, this requires a concrete reference to the
instantiated class rather than just the <code class="language-text">Type</code> to be resolved during schema initialization.</p>
<p>In version 8.5.0+, you may use <code class="language-text">Type&lt;TObjectType>()</code> or <code class="language-text">Type(Type objectType)</code> to reference
the object type from the interface type. This matches the same methods already available on
<code class="language-text">UnionGraphType</code>, unifying the API between unions and interfaces. The new methods will be
added to <code class="language-text">IAbstractGraphType</code> in version 9, which is implemented by both <code class="language-text">UnionGraphType</code>
and <code class="language-text">IInterfaceGraphType</code>. For example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterfaceGraphType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">InterfaceGraphType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">MyInterfaceGraphType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">Type</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyObjectGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For type-first users, a new attribute <code class="language-text">[PossibleType(Type objectType)]</code> has been added which
can be marked on interface CLR types to reference an object CLR or graph type that the interface
type implements. For instance:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PossibleType</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyObject</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IMyInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="34-deprecated-element-detection-and-validation-support-v86" style="position:relative;"><a href="#34-deprecated-element-detection-and-validation-support-v86" aria-label="34 deprecated element detection and validation support v86 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>34. Deprecated element detection and validation support (v8.6+)</h3>
<p>Two new classes have been added to help manage deprecated schema elements more effectively:
<a href="src/GraphQL/Utilities/Visitors/Custom/DeprecatedTypeReferenceVisitor.cs"><code class="language-text">DeprecatedTypeReferenceVisitor</code></a> and
<a href="src/GraphQL/Validation/Rules.Custom/DeprecatedElementsValidationRule.cs"><code class="language-text">DeprecatedElementsValidationRule</code></a>.
These classes work together to provide comprehensive deprecation management at both the schema and query validation levels.</p>
<p>The <a href="src/GraphQL/Utilities/Visitors/Custom/DeprecatedTypeReferenceVisitor.cs"><code class="language-text">DeprecatedTypeReferenceVisitor</code></a> is a schema visitor that identifies non-deprecated fields that directly reference deprecated types during schema initialization. This helps maintain schema consistency by flagging potential issues where deprecated types are still being referenced by active fields.</p>
<p>The <a href="src/GraphQL/Validation/Rules.Custom/DeprecatedElementsValidationRule.cs"><code class="language-text">DeprecatedElementsValidationRule</code></a> is an abstract validation rule that identifies deprecated fields, arguments, and types referenced in GraphQL documents during query validation. It provides abstract methods that can be overridden to implement custom handling of deprecated element usage, such as logging warnings or collecting metrics.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Create a custom validation rule to handle deprecated element usage during query validation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggingDeprecatedElementsRule</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DeprecatedElementsValidationRule</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ILogger<span class="token punctuation">&lt;</span>LoggingDeprecatedElementsRule<span class="token punctuation">></span></span> _logger<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">LoggingDeprecatedElementsRule</span><span class="token punctuation">(</span><span class="token class-name">ILogger<span class="token punctuation">&lt;</span>LoggingDeprecatedElementsRule<span class="token punctuation">></span></span> logger<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger <span class="token operator">=</span> logger<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">ValueTask</span> <span class="token function">OnDeprecatedFieldReferencedAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">GraphQLField</span> fieldNode<span class="token punctuation">,</span> <span class="token class-name">FieldType</span> fieldDefinition<span class="token punctuation">,</span> <span class="token class-name">IGraphType</span> parentType<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token string">"Deprecated field '{ParentType}.{FieldName}' was used: {DeprecationReason}"</span><span class="token punctuation">,</span>
            parentType<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> fieldDefinition<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> fieldDefinition<span class="token punctuation">.</span>DeprecationReason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">ValueTask</span> <span class="token function">OnDeprecatedFieldArgumentReferencedAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">GraphQLArgument</span> argumentNode<span class="token punctuation">,</span> <span class="token class-name">QueryArgument</span> argumentDefinition<span class="token punctuation">,</span> <span class="token class-name">FieldType</span> fieldDefinition<span class="token punctuation">,</span> <span class="token class-name">IGraphType</span> parentType<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token string">"Deprecated argument '{ParentType}.{FieldName}.{ArgumentName}' was used: {DeprecationReason}"</span><span class="token punctuation">,</span>
            parentType<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> fieldDefinition<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> argumentDefinition<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> argumentDefinition<span class="token punctuation">.</span>DeprecationReason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">ValueTask</span> <span class="token function">OnDeprecatedDirectiveArgumentReferencedAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">GraphQLArgument</span> argumentNode<span class="token punctuation">,</span> <span class="token class-name">QueryArgument</span> argumentDefinition<span class="token punctuation">,</span> <span class="token class-name">Directive</span> directiveDefinition<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token string">"Deprecated directive argument '@{DirectiveName}.{ArgumentName}' was used: {DeprecationReason}"</span><span class="token punctuation">,</span>
            directiveDefinition<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> argumentDefinition<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> argumentDefinition<span class="token punctuation">.</span>DeprecationReason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">ValueTask</span> <span class="token function">OnDeprecatedTypeReferencedAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">GraphQLNamedType</span> typeConditionNode<span class="token punctuation">,</span> <span class="token class-name">IGraphType</span> typeDefinition<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token string">"Deprecated type '{TypeName}' was used: {DeprecationReason}"</span><span class="token punctuation">,</span>
            typeDefinition<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> typeDefinition<span class="token punctuation">.</span>DeprecationReason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Register the schema visitor and validation rule</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MySchema<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchemaVisitor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DeprecatedTypeReferenceVisitor<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddValidationRule</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>LoggingDeprecatedElementsRule<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="35-schema-type-initialization-hooks-v86" style="position:relative;"><a href="#35-schema-type-initialization-hooks-v86" aria-label="35 schema type initialization hooks v86 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>35. Schema type initialization hooks (v8.6+)</h3>
<p>A new protected method <code class="language-text">OnBeforeInitializeType</code> has been added to the <code class="language-text">Schema</code> class that is called before each graph type is initialized during schema creation. This allows for custom logic to be executed before type processing, such as logging, validation, or metadata collection.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySchema</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Schema</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">MySchema</span><span class="token punctuation">(</span><span class="token class-name">IServiceProvider</span> serviceProvider<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>serviceProvider<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnBeforeInitializeType</span><span class="token punctuation">(</span><span class="token class-name">IGraphType</span> graphType<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Custom logic before each type is initialized</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Initializing type: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">graphType<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Example: Add metadata to track initialization order</span>
        graphType<span class="token punctuation">.</span><span class="token function">WithMetadata</span><span class="token punctuation">(</span><span class="token string">"InitializationTimestamp"</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This method is called exactly once for each graph type during schema initialization, ensuring that duplicate calls are avoided even when types are referenced multiple times or built automatically.</p>
<h3 id="36-field-specific-middleware-support-v870" style="position:relative;"><a href="#36-field-specific-middleware-support-v870" aria-label="36 field specific middleware support v870 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>36. Field-specific middleware support (v8.7.0+)</h3>
<p>GraphQL.NET now supports field-specific middleware through the <code class="language-text">FieldType.Middleware</code> property.
This allows middleware to be applied to individual fields rather than only globally across all fields
in the schema. Field middleware is collapsed into the field's resolver during schema initialization
for optimal performance.</p>
<p>You can apply middleware to individual fields using the <code class="language-text">ApplyMiddleware()</code> field builder extension method:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGraphType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectGraphType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">MyGraphType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"myField"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Resolve</span><span class="token punctuation">(</span>context <span class="token operator">=></span> <span class="token string">"Hello World"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>next <span class="token operator">=></span> <span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=></span>    <span class="token comment">// using a lambda</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// Code before resolver execution</span>
                <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Code after resolver execution</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Multiple middleware can be chained together on a single field, and they will be executed in the order
they were applied:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StringGraphType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"myField"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Resolve</span><span class="token punctuation">(</span>context <span class="token operator">=></span> <span class="token string">"Hello World"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>loggingMiddleware<span class="token punctuation">)</span>            <span class="token comment">// using an instance</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ApplyMiddleware</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthorizationMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// pulled from dependency injection</span></code></pre></div>
<p>The <code class="language-text">[Scoped]</code> attribute and related methods now use field middleware internally instead of wrapping
the resolver directly. This provides better composability and allows scoped services to work seamlessly
with other middleware.</p>
<h2 id="breaking-changes" style="position:relative;"><a href="#breaking-changes" aria-label="breaking changes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking Changes</h2>
<h3 id="1-query-type-is-required" style="position:relative;"><a href="#1-query-type-is-required" aria-label="1 query type is required permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Query type is required</h3>
<p>Pursuant to the GraphQL specification, a query type is required for any schema.
This is enforced during schema validation but may be bypassed as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">GlobalSwitches<span class="token punctuation">.</span>RequireRootQueryType <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code></pre></div>
<p>Future versions of GraphQL.NET will not contain this property and each schema will always be required to have a root Query type to comply with the GraphQL specification.</p>
<h3 id="2-use-code-classlanguage-textapplydirectivecode-instead-of-code-classlanguage-textdirectivecode-on-field-builders" style="position:relative;"><a href="#2-use-code-classlanguage-textapplydirectivecode-instead-of-code-classlanguage-textdirectivecode-on-field-builders" aria-label="2 use code classlanguage textapplydirectivecode instead of code classlanguage textdirectivecode on field builders permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Use <code class="language-text">ApplyDirective</code> instead of <code class="language-text">Directive</code> on field builders</h3>
<p>The <code class="language-text">Directive</code> method on field builders has been renamed to <code class="language-text">ApplyDirective</code> to better fit with
other field builder extension methods.</p>
<h3 id="3-use-code-classlanguage-textwithcomplexityimpactcode-instead-of-code-classlanguage-textcomplexityimpactcode-on-field-builders" style="position:relative;"><a href="#3-use-code-classlanguage-textwithcomplexityimpactcode-instead-of-code-classlanguage-textcomplexityimpactcode-on-field-builders" aria-label="3 use code classlanguage textwithcomplexityimpactcode instead of code classlanguage textcomplexityimpactcode on field builders permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Use <code class="language-text">WithComplexityImpact</code> instead of <code class="language-text">ComplexityImpact</code> on field builders</h3>
<p>The <code class="language-text">ComplexityImpact</code> method on field builders has been renamed to <code class="language-text">WithComplexityImpact</code> to better fit with
other field builder extension methods.</p>
<h3 id="4-relay-types-must-be-registered-within-the-di-provider" style="position:relative;"><a href="#4-relay-types-must-be-registered-within-the-di-provider" aria-label="4 relay types must be registered within the di provider permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Relay types must be registered within the DI provider</h3>
<p>Previuosly the Relay graph types were instantiated directly by the <code class="language-text">SchemaTypes</code> class. This has been changed so that
the types are now pulled from the DI container. No changes are required if you are using the provided DI builder methods,
as they automatically register the relay types. Otherwise, you will need to manually register the Relay graph types.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// v7 and prior -- builder methods -- NO CHANGES REQUIRED</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> <span class="token punctuation">{</span>
  b<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StarWarsSchema<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// v7 and prior -- manual registration</span>
services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StarWarsSchema<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// and other types</span>

<span class="token comment">// v8</span>
services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PageInfoType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
services<span class="token punctuation">.</span><span class="token function">AddSingleton</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">EdgeType<span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
services<span class="token punctuation">.</span><span class="token function">AddSingleton</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ConnectionType<span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
services<span class="token punctuation">.</span><span class="token function">AddSingleton</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ConnectionType<span class="token punctuation">&lt;</span><span class="token punctuation">,</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="5-duplicate-graphql-configuration-calls-with-the-same-code-classlanguage-textusecode-command-is-ignored" style="position:relative;"><a href="#5-duplicate-graphql-configuration-calls-with-the-same-code-classlanguage-textusecode-command-is-ignored" aria-label="5 duplicate graphql configuration calls with the same code classlanguage textusecode command is ignored permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Duplicate GraphQL configuration calls with the same <code class="language-text">Use</code> command is ignored</h3>
<p>Specifically, this relates to the following methods:</p>
<ul>
<li><code class="language-text">UseMemoryCache()</code></li>
<li><code class="language-text">UseAutomaticPersistedQueries()</code></li>
<li><code class="language-text">UseConfiguration&lt;T>()</code> with the same <code class="language-text">T</code> type</li>
</ul>
<p>This change was made to prevent duplicate registrations of the same service within the DI container.</p>
<h3 id="6-code-classlanguage-textobjectextensionstoobjectcode-changes-impacts-code-classlanguage-textinputobjectgraphtypecode" style="position:relative;"><a href="#6-code-classlanguage-textobjectextensionstoobjectcode-changes-impacts-code-classlanguage-textinputobjectgraphtypecode" aria-label="6 code classlanguage textobjectextensionstoobjectcode changes impacts code classlanguage textinputobjectgraphtypecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. <code class="language-text">ObjectExtensions.ToObject</code> changes (impacts <code class="language-text">InputObjectGraphType</code>)</h3>
<ul>
<li><code class="language-text">ObjectExtensions.ToObject&lt;T></code> was removed; it was only used by internal tests.</li>
<li><code class="language-text">ObjectExtensions.ToObject</code> requires input object graph type for conversion.</li>
<li>Only public constructors are eligible candidates while selecting a constructor.</li>
<li>Constructor is selected based on the following rules:
<ul>
<li>If only a single public constructor is available, it is used.</li>
<li>If a public constructor is marked with <code class="language-text">[GraphQLConstructor]</code>, it is used.</li>
<li>Otherwise the public parameterless constructor is used if available.</li>
<li>Otherwise an exception is thrown during deserialization.</li>
</ul>
</li>
<li>Only public properties are eligible candidates when matching a property.</li>
<li>Any init-only or required properties not provided in the dictionary are set to their default values.</li>
<li>Only public writable fields are eligible candidates when matching a field.</li>
</ul>
<p>The changes above allow for matching behavior with source-generated or dynamically-compiled functions.</p>
<h3 id="7-code-classlanguage-textautoregisteringinputobjectgraphtypecode-changes" style="position:relative;"><a href="#7-code-classlanguage-textautoregisteringinputobjectgraphtypecode-changes" aria-label="7 code classlanguage textautoregisteringinputobjectgraphtypecode changes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. <code class="language-text">AutoRegisteringInputObjectGraphType</code> changes</h3>
<ul>
<li>See above changes to <code class="language-text">ObjectExtensions.ToObject</code> for deserialization notes.</li>
<li>Registers read-only properties when the property name matches the name of a parameter in the
chosen constructor. Comparison is case-insensitive, matching <code class="language-text">ToObject</code> behavior.
Does not register constructor parameters that are not read-only properties.
Any attributes such as <code class="language-text">[Id]</code> must be applied to the property, not the constructor parameter.</li>
</ul>
<h3 id="8-default-naming-of-generic-graph-types-has-changed" style="position:relative;"><a href="#8-default-naming-of-generic-graph-types-has-changed" aria-label="8 default naming of generic graph types has changed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. Default naming of generic graph types has changed</h3>
<p>The default graph name of generic types has changed to include the generic type name.
This should reduce naming conflicts when generics are in use. To consolidate behavior
across different code paths, both <code class="language-text">Type</code> and <code class="language-text">GraphType</code> are stripped from the end
of the class name. See below examples:</p>
<table>
<thead>
<tr>
<th>Graph type class name</th>
<th>Old graph type name</th>
<th>New graph type name</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">PersonType</code></td>
<td><code class="language-text">PersonType</code></td>
<td><code class="language-text">Person</code></td>
</tr>
<tr>
<td><code class="language-text">PersonGraphType</code></td>
<td><code class="language-text">Person</code></td>
<td><code class="language-text">Person</code></td>
</tr>
<tr>
<td><code class="language-text">AutoRegisteringObjectGraphType&lt;SearchResults&lt;Person>></code></td>
<td><code class="language-text">SearchResults</code></td>
<td><code class="language-text">PersonSearchResults</code></td>
</tr>
<tr>
<td><code class="language-text">LoggerGraphType&lt;Person, string></code></td>
<td><code class="language-text">Logger</code></td>
<td><code class="language-text">PersonStringLogger</code></td>
</tr>
<tr>
<td><code class="language-text">InputObjectGraphType&lt;Person></code></td>
<td><code class="language-text">InputObject_1</code></td>
<td><code class="language-text">PersonInputObject</code></td>
</tr>
</tbody>
</table>
<p>To revert to the prior behavior, set the following global switch prior to creating your schema classes:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">GraphQL</span><span class="token punctuation">;</span>

GlobalSwitches<span class="token punctuation">.</span>UseLegacyTypeNaming <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre></div>
<p>As usual, you are encouraged to set the name in the constructor of your class, or
immediately after construction, or for auto-registering types, via an attribute.
You can also set global attributes that will be applied to all auto-registering types
if you wish to define your own naming logic.</p>
<p>The <code class="language-text">UseLegacyTypeNaming</code> option is deprecated and will be removed in GraphQL.NET v9.</p>
<h3 id="9-dataloader-extension-methods-have-been-moved-to-the-graphql-namespace" style="position:relative;"><a href="#9-dataloader-extension-methods-have-been-moved-to-the-graphql-namespace" aria-label="9 dataloader extension methods have been moved to the graphql namespace permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. DataLoader extension methods have been moved to the GraphQL namespace</h3>
<p>This change simplifies using extension methods for the data loaders. You may need to
remove the <code class="language-text">using GraphQL.DataLoader;</code> statement from your code to resolve any
compiler warnings, and/or add <code class="language-text">using GraphQL;</code>.</p>
<h3 id="10-the-schemaprinter-has-been-deprecated" style="position:relative;"><a href="#10-the-schemaprinter-has-been-deprecated" aria-label="10 the schemaprinter has been deprecated permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>10. The SchemaPrinter has been deprecated</h3>
<p>Please see the v7 migration document regarding the new <code class="language-text">schema.ToAST()</code> and
<code class="language-text">schema.Print()</code> methods available for printing the schema (available since 7.6).</p>
<p>For federated schemas, the <code class="language-text">ServiceGraphType</code>'s <code class="language-text">sdl</code> field will now use the
new implementation to print the schema. Please raise an issue if this causes
a problem for your federated schema.</p>
<h3 id="11-removed-deprecated-methods" style="position:relative;"><a href="#11-removed-deprecated-methods" aria-label="11 removed deprecated methods permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11. Removed deprecated methods.</h3>
<p>The following GraphQL DI builder methods have been removed:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Replacement</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">AddApolloTracing</code></td>
<td><code class="language-text">UseApolloTracing</code></td>
</tr>
<tr>
<td><code class="language-text">AddMiddleware</code></td>
<td><code class="language-text">UseMiddleware</code></td>
</tr>
<tr>
<td><code class="language-text">AddAutomaticPersistedQueries</code></td>
<td><code class="language-text">UseAutomaticPersistedQueries</code></td>
</tr>
<tr>
<td><code class="language-text">AddMemoryCache</code></td>
<td><code class="language-text">UseMemoryCache</code></td>
</tr>
</tbody>
</table>
<p>The following methods have been removed:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">TypeExtensions.IsConcrete</code></td>
<td>Use <code class="language-text">!type.IsAbstract</code></td>
</tr>
<tr>
<td><code class="language-text">GraphQLTelemetryProvider.StartActivityAsync</code></td>
<td>Use <code class="language-text">StartActivity</code></td>
</tr>
<tr>
<td><code class="language-text">AutoRegisteringInterfaceGraphType.BuildMemberInstanceExpression</code></td>
<td>Interfaces cannot contain resolvers so this method was unused</td>
</tr>
<tr>
<td><code class="language-text">ValidationContext.GetVariableValuesAsync</code></td>
<td>Use <code class="language-text">GetVariablesValuesAsync</code></td>
</tr>
</tbody>
</table>
<p>The following constructors have been removed:</p>
<table>
<thead>
<tr>
<th>Class</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">Variable</code></td>
<td>Use new constructor with <code class="language-text">definition</code> argument</td>
</tr>
<tr>
<td><code class="language-text">VariableUsage</code></td>
<td>Use new constructor with <code class="language-text">hasDefault</code> argument</td>
</tr>
</tbody>
</table>
<h3 id="12-code-classlanguage-textivariablevisitorprovidercode-removed-and-code-classlanguage-textivalidationrulecode-changed" style="position:relative;"><a href="#12-code-classlanguage-textivariablevisitorprovidercode-removed-and-code-classlanguage-textivalidationrulecode-changed" aria-label="12 code classlanguage textivariablevisitorprovidercode removed and code classlanguage textivalidationrulecode changed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12. <code class="language-text">IVariableVisitorProvider</code> removed and <code class="language-text">IValidationRule</code> changed</h3>
<p>The <code class="language-text">ValidateAsync</code> method on <code class="language-text">IValidationRule</code> has been changed to <code class="language-text">GetPreNodeVisitorAsync</code>,
and a new method <code class="language-text">GetPostNodeVisitorAsync</code> has been added. Also, the <code class="language-text">IVariableVisitorProvider</code>
interface has been combined with <code class="language-text">IValidationRule</code> and now has a new method <code class="language-text">GetVariableVisitorAsync</code>.
So the new <code class="language-text">IValidationRule</code> interface looks like this:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IValidationRule</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>INodeVisitor<span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetPreNodeVisitorAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>IVariableVisitor<span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetVariableVisitorAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>INodeVisitor<span class="token punctuation">?</span><span class="token punctuation">></span></span> <span class="token function">GetPostNodeVisitorAsync</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>It is recommended to inherit from <code class="language-text">ValidationRuleBase</code> for custom validation rules
and override only the methods you need to implement.</p>
<h3 id="13-new-properties-added-to-code-classlanguage-textigraphtypecode-code-classlanguage-textifieldtypecode-and-code-classlanguage-textiobjectgraphtypecode" style="position:relative;"><a href="#13-new-properties-added-to-code-classlanguage-textigraphtypecode-code-classlanguage-textifieldtypecode-and-code-classlanguage-textiobjectgraphtypecode" aria-label="13 new properties added to code classlanguage textigraphtypecode code classlanguage textifieldtypecode and code classlanguage textiobjectgraphtypecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>13. New properties added to <code class="language-text">IGraphType</code>, <code class="language-text">IFieldType</code> and <code class="language-text">IObjectGraphType</code></h3>
<p>See the new features section for details on the new properties added to these interfaces.
Unless you directly implement these interfaces, you should not be impacted by these changes.</p>
<h3 id="14-code-classlanguage-textischemanodevisitorpostvisitschemacode-method-added" style="position:relative;"><a href="#14-code-classlanguage-textischemanodevisitorpostvisitschemacode-method-added" aria-label="14 code classlanguage textischemanodevisitorpostvisitschemacode method added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>14. <code class="language-text">ISchemaNodeVisitor.PostVisitSchema</code> method added</h3>
<p>See the new features section for details on the new method added to this interface.
Unless you directly implement this interface, you should not be impacted by this change.</p>
<h3 id="15-code-classlanguage-textanyscalartypecode-and-code-classlanguage-textservicegraphtypecode-moved-to-code-classlanguage-textgraphqlfederationtypescode" style="position:relative;"><a href="#15-code-classlanguage-textanyscalartypecode-and-code-classlanguage-textservicegraphtypecode-moved-to-code-classlanguage-textgraphqlfederationtypescode" aria-label="15 code classlanguage textanyscalartypecode and code classlanguage textservicegraphtypecode moved to code classlanguage textgraphqlfederationtypescode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>15. <code class="language-text">AnyScalarType</code> and <code class="language-text">ServiceGraphType</code> moved to <code class="language-text">GraphQL.Federation.Types</code></h3>
<p>These graph types, previously located within the <code class="language-text">GraphQL.Utilities.Federation</code> namespace,
have been moved to the <code class="language-text">GraphQL.Federation.Types</code> namespace alongside all other federation types.</p>
<h3 id="16-code-classlanguage-textifederatedresolvercode-code-classlanguage-textfuncfederatedresolvercode-and-code-classlanguage-textresolvereferenceasynccode-replaced" style="position:relative;"><a href="#16-code-classlanguage-textifederatedresolvercode-code-classlanguage-textfuncfederatedresolvercode-and-code-classlanguage-textresolvereferenceasynccode-replaced" aria-label="16 code classlanguage textifederatedresolvercode code classlanguage textfuncfederatedresolvercode and code classlanguage textresolvereferenceasynccode replaced permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>16. <code class="language-text">IFederatedResolver</code>, <code class="language-text">FuncFederatedResolver</code> and <code class="language-text">ResolveReferenceAsync</code> replaced</h3>
<ul>
<li><code class="language-text">IFederatedResolver</code> has been replaced with <code class="language-text">IFederationResolver</code>.</li>
<li><code class="language-text">FuncFederatedResolver</code> has been replaced with <code class="language-text">FederationResolver</code>.</li>
<li><code class="language-text">ResolveReferenceAsync</code> has been replaced with <code class="language-text">ResolveReference</code>.</li>
</ul>
<p>Please note that the new members are now located in the <code class="language-text">GraphQL.Federation</code> namespace and may
require slight changes to your code to accommodate the new signatures. The old members have been
marked as obsolete and will continue to work in v8, but will be removed in v9.</p>
<h3 id="17-graphql-federation-entity-resolvers-do-not-automatically-inject-code-classlanguage-text__typenamecode-into-requests" style="position:relative;"><a href="#17-graphql-federation-entity-resolvers-do-not-automatically-inject-code-classlanguage-text__typenamecode-into-requests" aria-label="17 graphql federation entity resolvers do not automatically inject code classlanguage text__typenamecode into requests permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>17. GraphQL Federation entity resolvers do not automatically inject <code class="language-text">__typename</code> into requests.</h3>
<p>Previously, the <code class="language-text">__typename</code> field was automatically injected into the request for entity resolvers.
This behavior has been removed as it is not required to meet the GraphQL Federation specification.</p>
<p>For instance, the following sample request:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token property-query">_entities</span><span class="token punctuation">(</span><span class="token attr-name">representations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token attr-name">__typename</span><span class="token punctuation">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span> <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
      <span class="token property">id</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Should now be written as:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token property-query">_entities</span><span class="token punctuation">(</span><span class="token attr-name">representations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token attr-name">__typename</span><span class="token punctuation">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span> <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">__typename</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
      <span class="token property">id</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Please ensure that your client requests are updated to include the <code class="language-text">__typename</code> field in the response.
Alternatively, you can install the provided <code class="language-text">InjectTypenameValidationRule</code> validation rule to automatically
inject the <code class="language-text">__typename</code> field into the request.</p>
<h3 id="18-code-classlanguage-textiinputobjectgraphtypeisoneofcode-property-added" style="position:relative;"><a href="#18-code-classlanguage-textiinputobjectgraphtypeisoneofcode-property-added" aria-label="18 code classlanguage textiinputobjectgraphtypeisoneofcode property added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>18. <code class="language-text">IInputObjectGraphType.IsOneOf</code> property added</h3>
<p>See the new features section for details on the new property added to this interface.
Unless you directly implement this interface, you should not be impacted by this change.</p>
<h3 id="19-code-classlanguage-textvariableusageisrequiredcode-property-added-and-code-classlanguage-textvariableusagecode-constructor-changed" style="position:relative;"><a href="#19-code-classlanguage-textvariableusageisrequiredcode-property-added-and-code-classlanguage-textvariableusagecode-constructor-changed" aria-label="19 code classlanguage textvariableusageisrequiredcode property added and code classlanguage textvariableusagecode constructor changed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>19. <code class="language-text">VariableUsage.IsRequired</code> property added and <code class="language-text">VariableUsage</code> constructor changed</h3>
<p>This is required for OneOf Input Object support and is used to determine if a variable is required.
Unless you have a custom validation rule that uses <code class="language-text">VariableUsage</code>, you should not be impacted
by this change.</p>
<h3 id="20-infer-field-nullability-from-nrt-annotations-is-enabled-by-default" style="position:relative;"><a href="#20-infer-field-nullability-from-nrt-annotations-is-enabled-by-default" aria-label="20 infer field nullability from nrt annotations is enabled by default permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>20. Infer field nullability from NRT annotations is enabled by default</h3>
<p>When defining the field with expression, the graph type nullability will be inferred from
Null Reference Types (NRT) by default. See the new features section for more details.<br>
To revert to old behavior set the global switch before initializing the schema</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">GlobalSwitches<span class="token punctuation">.</span>InferFieldNullabilityFromNRTAnnotations <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="21-the-complexity-analyzer-has-been-rewritten-and-functions-differently" style="position:relative;"><a href="#21-the-complexity-analyzer-has-been-rewritten-and-functions-differently" aria-label="21 the complexity analyzer has been rewritten and functions differently permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>21. The complexity analyzer has been rewritten and functions differently</h3>
<p>The complexity analyzer has been rewritten to be more efficient and to support more complex
scenarios. Please read the documentation on the new complexity analyzer to understand how it
works and how to configure it. To revert to the old behavior, use the <code class="language-text">LegacyComplexityValidationRule</code>
or GraphQL builder method as follows:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyQuery<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddLegacyComplexityAnalyzer</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span>MaxComplexity <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">// use the v7 complexity analyzer</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The legacy complexity analyzer will be removed in v9.</p>
<h3 id="22-unhandled-exceptions-within-execution-configuration-delegates-are-now-handled-and-wrapped" style="position:relative;"><a href="#22-unhandled-exceptions-within-execution-configuration-delegates-are-now-handled-and-wrapped" aria-label="22 unhandled exceptions within execution configuration delegates are now handled and wrapped permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>22. Unhandled exceptions within execution configuration delegates are now handled and wrapped</h3>
<p>Previously, unhandled exceptions within execution configuration delegates were not handled and
would be thrown directly to the caller. For instance, if a database exception occurred within
the delegate used to pull persisted documents, the exception would be thrown directly to the
caller. Now, these exceptions are caught and processed through the unhandled exception handler
delegate, which allows for logging and other processing of the exception.</p>
<p>Example:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyQuery<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddUnhandledExceptionHandler</span><span class="token punctuation">(</span>context <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token comment">// this now runs when the below exception is thrown</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ConfigureExecution</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>options<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">// sample exception thrown while logging the query being executed to a database</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"Database exception occurred"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>For this to work properly, be sure that any code liable to throw an exception is located inside
a <code class="language-text">Use...</code> or <code class="language-text">ConfigureExecution</code> method, not an <code class="language-text">Add...</code> or <code class="language-text">ConfigureExecutionOptions</code> method,
or else ensure that the call to <code class="language-text">AddUnhandledExceptionHandler</code> is first in the chain.</p>
<h3 id="23-code-classlanguage-textiexecutioncontextexecutionoptionscode-property-added" style="position:relative;"><a href="#23-code-classlanguage-textiexecutioncontextexecutionoptionscode-property-added" aria-label="23 code classlanguage textiexecutioncontextexecutionoptionscode property added permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>23. <code class="language-text">IExecutionContext.ExecutionOptions</code> property added</h3>
<p>Custom <code class="language-text">IExecutionContext</code> implementations must now implement the <code class="language-text">ExecutionOptions</code> property.
In addition, the <code class="language-text">AddUnhandledExceptionHandler</code> methods that have an <code class="language-text">ExecutionOptions</code> parameter
within the delegate have been deprecated in favor of using the <code class="language-text">IExecutionContext.ExecutionOptions</code>
property.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// v7</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyQuery<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddUnhandledExceptionHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token comment">// code</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// v8</span>
services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSchema</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyQuery<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddUnhandledExceptionHandler</span><span class="token punctuation">(</span>context <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> options <span class="token operator">=</span> context<span class="token punctuation">.</span>ExecutionOptions<span class="token punctuation">;</span>
        <span class="token comment">// code</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="24-id-graph-type-serialization-is-culture-invariant" style="position:relative;"><a href="#24-id-graph-type-serialization-is-culture-invariant" aria-label="24 id graph type serialization is culture invariant permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>24. ID graph type serialization is culture-invariant</h3>
<p>The <code class="language-text">IdGraphType</code> now serializes values using the invariant culture.</p>
<h3 id="25-directiveattribute-moved-to-graphql-namespace" style="position:relative;"><a href="#25-directiveattribute-moved-to-graphql-namespace" aria-label="25 directiveattribute moved to graphql namespace permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>25. DirectiveAttribute moved to GraphQL namespace</h3>
<p>The <code class="language-text">DirectiveAttribute</code> has been moved to the <code class="language-text">GraphQL</code> namespace.</p>
<h3 id="26-changes-to-support-interface-inheritance" style="position:relative;"><a href="#26-changes-to-support-interface-inheritance" aria-label="26 changes to support interface inheritance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>26. Changes to support interface inheritance</h3>
<p>Small changes were made to <code class="language-text">IInterfaceGraphType</code> and <code class="language-text">IImplementInterfaces</code> to support interface inheritance.
If you have custom implementations of these interfaces, you may need to update them.</p>
<h3 id="27-stricter-type-checking-when-implementing-interfaces" style="position:relative;"><a href="#27-stricter-type-checking-when-implementing-interfaces" aria-label="27 stricter type checking when implementing interfaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>27. Stricter type checking when implementing interfaces</h3>
<p>Verfies that the arguments defined on fields of interfaces are also defined on fields of implementing types,
pursuant to GraphQL specifications.</p>
<h3 id="28-apis-marked-obsolete-since-v5-have-been-removed" style="position:relative;"><a href="#28-apis-marked-obsolete-since-v5-have-been-removed" aria-label="28 apis marked obsolete since v5 have been removed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>28. APIs marked obsolete since v5 have been removed</h3>
<ul>
<li><code class="language-text">GraphQLMetadataAttribute.InputType</code> has been replaced with <code class="language-text">InputTypeAttribute</code>.</li>
<li><code class="language-text">GraphQLMetadataAttribute.OutputType</code> has been replaced with <code class="language-text">OutputTypeAttribute</code>.</li>
<li><code class="language-text">ErrorInfoProviderOptions.ExposeExceptionStackTrace</code> has been replaced with <code class="language-text">ExposeExceptionDetails</code> and <code class="language-text">ExposeExceptionDetailsMode</code>.</li>
</ul>
<p>See prior migration documents for more details concerning these changes.</p>
<h3 id="29-code-classlanguage-textiresolvefieldcontextexecutioncontextcode-added-and-code-classlanguage-textexecutioncontextgetargumentscode-signature-has-changed" style="position:relative;"><a href="#29-code-classlanguage-textiresolvefieldcontextexecutioncontextcode-added-and-code-classlanguage-textexecutioncontextgetargumentscode-signature-has-changed" aria-label="29 code classlanguage textiresolvefieldcontextexecutioncontextcode added and code classlanguage textexecutioncontextgetargumentscode signature has changed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>29. <code class="language-text">IResolveFieldContext.ExecutionContext</code> added and <code class="language-text">ExecutionContext.GetArguments</code> signature has changed</h3>
<p>If you are using the <code class="language-text">ExecutionContext.GetArguments</code> method to parse arguments directly, for example to retrieve
the arguments of child fields in a resolver, we suggest using the new <code class="language-text">IExecutionContext.GetArguments</code> and
<code class="language-text">IExecutionContext.GetDirectives</code> methods instead. These take advantage of the fact that all arguments
are parsed during the validation phase and need not be parsed again. See example below:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// v7</span>
<span class="token class-name">IResolveFieldContext</span> context<span class="token punctuation">;</span>       <span class="token comment">// parent context</span>
<span class="token class-name">FieldType</span> fieldDefinition<span class="token punctuation">;</span>          <span class="token comment">// field definition from which to get arguments</span>
<span class="token class-name">GraphQLField</span> fieldAst<span class="token punctuation">;</span>              <span class="token comment">// field AST from which to get arguments</span>
<span class="token class-name"><span class="token keyword">var</span></span> arguments <span class="token operator">=</span> ExecutionHelper<span class="token punctuation">.</span><span class="token function">GetArguments</span><span class="token punctuation">(</span>fieldDefinition<span class="token punctuation">.</span>Arguments<span class="token punctuation">,</span> fieldAst<span class="token punctuation">.</span>Arguments<span class="token punctuation">,</span> context<span class="token punctuation">.</span>Variables<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// v8</span>
<span class="token class-name">IResolveFieldContext</span> context<span class="token punctuation">;</span>       <span class="token comment">// parent context</span>
<span class="token class-name">FieldType</span> fieldDefinition<span class="token punctuation">;</span>          <span class="token comment">// field definition from which to get arguments</span>
<span class="token class-name">GraphQLField</span> fieldAst<span class="token punctuation">;</span>              <span class="token comment">// field AST from which to get arguments</span>
<span class="token class-name"><span class="token keyword">var</span></span> arguments <span class="token operator">=</span> context<span class="token punctuation">.</span>ExecutionContext<span class="token punctuation">.</span><span class="token function">GetArguments</span><span class="token punctuation">(</span>fieldDefinition<span class="token punctuation">,</span> fieldAst<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>To continue to use the <code class="language-text">ExecutionHelper.GetArguments</code> method, you may need to refer to the GraphQL.NET source
for reference.</p>
<p>If you directly implement <code class="language-text">IResolveFieldContext</code>, you must now also implement the <code class="language-text">ExecutionContext</code> property.</p>
<h3 id="30-code-classlanguage-textgraphtypeinitializecode-method-is-now-called-after-initialization-is-complete" style="position:relative;"><a href="#30-code-classlanguage-textgraphtypeinitializecode-method-is-now-called-after-initialization-is-complete" aria-label="30 code classlanguage textgraphtypeinitializecode method is now called after initialization is complete permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>30. <code class="language-text">GraphType.Initialize</code> method is now called after initialization is complete</h3>
<p>The <code class="language-text">Initialize</code> method on each <code class="language-text">GraphType</code> is now called after the schema has been fully initialized. As such,
you cannot add fields to the graph type expecting <code class="language-text">SchemaTypes</code> to resolve types and apply name converters.
If it is necessary for your graph type to add fields dynamically, you should do so in the constructor or else
set the <code class="language-text">ResolvedType</code> property for the new fields. Failing to do so will result in a schema validation exception.</p>
<p>Please note that the constructor is the preferred place to add fields to a graph type.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// v7</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGraphType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectGraphType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token class-name">ISchema</span> schema<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">AddField</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FieldType</span> <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token string">"Field"</span><span class="token punctuation">,</span>
            Type <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">StringGraphType</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// v8</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGraphType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectGraphType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token class-name">ISchema</span> schema<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">AddField</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FieldType</span> <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token string">"field"</span><span class="token punctuation">,</span> <span class="token comment">// name converter is not applied here, so the name must be exactly as desired</span>
            ResolvedType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringGraphType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="appendix" style="position:relative;"><a href="#appendix" aria-label="appendix permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Appendix</h2>
<h3 id="schema-verification-test-example" style="position:relative;"><a href="#schema-verification-test-example" aria-label="schema verification test example permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Schema verification test example</h3>
<p>The below example demonstrates how to write a test to verify that the schema does not change during
migration.</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">VerifyIntrospection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> services <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> startup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Startup</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConfigurationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    startup<span class="token punctuation">.</span><span class="token function">ConfigureServices</span><span class="token punctuation">(</span>services<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> provider <span class="token operator">=</span> services<span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> schema <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ISchema<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    schema<span class="token punctuation">.</span><span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> sdl <span class="token operator">=</span> schema<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> StringComparison <span class="token operator">=</span> StringComparison<span class="token punctuation">.</span>OrdinalIgnoreCase <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    sdl<span class="token punctuation">.</span><span class="token function">ShouldMatchApproved</span><span class="token punctuation">(</span>o <span class="token operator">=></span> o<span class="token punctuation">.</span><span class="token function">NoDiff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithFileExtension</span><span class="token punctuation">(</span><span class="token string">"graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This test uses the <code class="language-text">ShouldMatchApproved</code> method from the <code class="language-text">Shouldly</code> NuGet package to compare the schema
generated by the application to the approved schema. If the schema changes, the test will fail, and you
will need to update the approved schema file or fix the code that caused the schema to change.</p></article><div class="content-toolbar"><a href="https://github.com/graphql-dotnet/graphql-dotnet/edit/master/docs2/site/docs/migrations/migration8.md" rel="noopener noreferrer" target="_blank">Edit this page on GitHub</a></div></div><div class="nav"><nav><ul><li><span>Getting Started</span><nav><ul><li><a class="" href="/docs/getting-started/introduction/">Introduction</a></li><li><a class="" href="/docs/getting-started/installation/">Installation</a></li><li><a class="" href="/docs/getting-started/graphiql/">GraphiQL</a></li><li><a class="" href="/docs/getting-started/altair-graphql/">Altair GraphQL</a></li><li><a class="" href="/docs/getting-started/queries/">Queries</a></li><li><a class="" href="/docs/getting-started/schema-types/">Schema Types</a></li><li><a class="" href="/docs/getting-started/custom-scalars/">Custom Scalars</a></li><li><a class="" href="/docs/getting-started/lists-non-null/">Lists and Non-Null</a></li><li><a class="" href="/docs/getting-started/arguments/">Arguments</a></li><li><a class="" href="/docs/getting-started/aliases/">Aliases</a></li><li><a class="" href="/docs/getting-started/fragments/">Fragments</a></li><li><a class="" href="/docs/getting-started/variables/">Variables</a></li><li><a class="" href="/docs/getting-started/directives/">Directives</a></li><li><a class="" href="/docs/getting-started/mutations/">Mutations</a></li><li><a class="" href="/docs/getting-started/interfaces/">Interfaces</a></li><li><a class="" href="/docs/getting-started/unions/">Unions</a></li><li><a class="" href="/docs/getting-started/subscriptions/">Subscriptions</a></li><li><a class="" href="/docs/getting-started/transport/">Transport</a></li><li><a class="" href="/docs/getting-started/query-validation/">Query Validation</a></li><li><a class="" href="/docs/getting-started/query-organization/">Query Organization</a></li><li><a class="" href="/docs/getting-started/user-context/">User Context</a></li><li><a class="" href="/docs/getting-started/errors/">Error Handling</a></li><li><a class="" href="/docs/getting-started/dependency-injection/">Dependency Injection</a></li><li><a class="" href="/docs/getting-started/databases/">Databases</a></li><li><a class="" href="/docs/getting-started/malicious-queries/">Malicious Queries</a></li><li><a class="" href="/docs/getting-started/metadata/">Object/Field Metadata</a></li><li><a class="" href="/docs/getting-started/field-middleware/">Field Middleware</a></li><li><a class="" href="/docs/getting-started/metrics/">Metrics</a></li><li><a class="" href="/docs/getting-started/authorization/">Authorization</a></li><li><a class="" href="/docs/getting-started/relay/">Relay</a></li><li><a class="" href="/docs/getting-started/global-switches/">Global Switches</a></li></ul></nav></li><li><span>Guides</span><nav><ul><li><a class="" href="/docs/guides/serialization/">Serialization</a></li><li><a class="" href="/docs/guides/dataloader/">Dataloader</a></li><li><a class="" href="/docs/guides/complexity-analyzer/">Complexity Analyzer</a></li><li><a class="" href="/docs/guides/schema-generation/">Schema Generation</a></li><li><a class="" href="/docs/guides/known-issues/">Known Issues &amp; FAQ</a></li><li><a class="" href="/docs/guides/links/">Links</a></li><li><a class="" href="/docs/guides/document-caching/">Document Caching</a></li></ul></nav></li><li><span>Analyzers</span><nav><ul><li><a class="" href="/docs/analyzers/overview/">Overview</a></li><li><a class="" href="/docs/analyzers/gql001/">GQL001</a></li><li><a class="" href="/docs/analyzers/gql002/">GQL002</a></li><li><a class="" href="/docs/analyzers/gql003/">GQL003</a></li><li><a class="" href="/docs/analyzers/gql004/">GQL004</a></li><li><a class="" href="/docs/analyzers/gql005/">GQL005</a></li><li><a class="" href="/docs/analyzers/gql006/">GQL006</a></li><li><a class="" href="/docs/analyzers/gql007/">GQL007</a></li><li><a class="" href="/docs/analyzers/gql008/">GQL008</a></li><li><a class="" href="/docs/analyzers/gql009/">GQL009</a></li><li><a class="" href="/docs/analyzers/gql010/">GQL010</a></li><li><a class="" href="/docs/analyzers/gql011/">GQL011</a></li><li><a class="" href="/docs/analyzers/gql012/">GQL012</a></li><li><a class="" href="/docs/analyzers/gql013/">GQL013</a></li><li><a class="" href="/docs/analyzers/gql014/">GQL014</a></li><li><a class="" href="/docs/analyzers/gql015/">GQL015</a></li><li><a class="" href="/docs/analyzers/gql016/">GQL016</a></li><li><a class="" href="/docs/analyzers/gql017/">GQL017</a></li><li><a class="" href="/docs/analyzers/gql018/">GQL018</a></li><li><a class="" href="/docs/analyzers/gql019/">GQL019</a></li><li><a class="" href="/docs/analyzers/gql020/">GQL020</a></li></ul></nav></li><li><span>Migration Guides</span><nav><ul><li><a aria-current="page" class="active" href="/docs/migrations/migration8/">Migration Guide [v7 -&gt; v8]</a></li><li><a class="" href="/docs/migrations/migration7/">Migration Guide [v5 -&gt; v7]</a></li><li><a class="" href="/docs/migrations/migration5/">Migration Guide [v4 -&gt; v5]</a></li><li><a class="" href="/docs/migrations/migration4/">Migration Guide [v3 -&gt; v4]</a></li><li><a class="" href="/docs/migrations/migration3/">Migration Guide [v2 -&gt; v3]</a></li><li><a class="" href="/docs/migrations/migration2/">Migration Guide [v0.17.x -&gt; v2]</a></li><li><a class="" href="/docs/migrations/v0_11_0/">Migration Guide [v0.11.0]</a></li><li><a class="" href="/docs/migrations/v0_8_0/">Migration Guide [v0.8.0]</a></li></ul></nav></li></ul></nav></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/migrations/migration8/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-74a2ba1e15257c732092.js\"],\"component---site-pages-landing-js\":[\"/component---site-pages-landing-js-37c578299169eb8a539f.js\"],\"component---src-components-docs-page-js\":[\"/component---src-components-docs-page-js-e3639732923322971c67.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-85ee983f7aedd5226d81.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="39c8acac30987e5361ce";</script><script src="/webpack-runtime-cbe35219dcd4fdfe7add.js" async></script><script src="/framework-1a414f17d64f2befb926.js" async></script><script src="/app-74a2ba1e15257c732092.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>